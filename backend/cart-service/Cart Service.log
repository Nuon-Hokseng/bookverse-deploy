[dotenv@17.2.3] injecting env (5) from .env -- tip: ⚙️  suppress all logs with { quiet: true }
MongoDB connected
Cart Service running on port 3001
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 3
[Cart Controller] Add to cart request: {
  bookId: '692573bc154d8e8a803b4953',
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Found cart item: null
[Cart Controller] Created new cart item: {
  cart: new ObjectId('692c175d6e121aa1a0fe390b'),
  book: new ObjectId('692573bc154d8e8a803b4953'),
  quantity: 1,
  _id: new ObjectId('692c1f173899ee73d624934c'),
  createdAt: 2025-11-30T10:40:23.297Z,
  updatedAt: 2025-11-30T10:40:23.297Z,
  __v: 0
}
[Cart Controller] Add to cart request: {
  bookId: '692573bc154d8e8a803b4954',
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 4
[Cart Controller] Found cart item: null
[Cart Controller] Created new cart item: {
  cart: new ObjectId('692c175d6e121aa1a0fe390b'),
  book: new ObjectId('692573bc154d8e8a803b4954'),
  quantity: 1,
  _id: new ObjectId('692c1f173899ee73d6249351'),
  createdAt: 2025-11-30T10:40:23.741Z,
  updatedAt: 2025-11-30T10:40:23.741Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 5
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 5
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
[Cart Controller] Get cart request: {
  userId: '692c1754b21bb8ec44f82cb4',
  userFromHeaders: {
    id: '692c1754b21bb8ec44f82cb4',
    role: 'user',
    email: 'sengnoname168@gmail.com'
  }
}
[Cart Controller] Found cart: {
  _id: new ObjectId('692c175d6e121aa1a0fe390b'),
  user: new ObjectId('692c1754b21bb8ec44f82cb4'),
  createdAt: 2025-11-30T10:07:25.619Z,
  updatedAt: 2025-11-30T10:07:25.619Z,
  __v: 0
}
[Cart Controller] Returning cart with items: 0
