2025-11-22 05:38:01 [info]: Configuring route: /v1/auth -> http://auth-service:5000 (Auth: false)
2025-11-22 05:38:01 [info]: Configuring route: /v1/books -> http://book-service:3000 (Auth: false)
2025-11-22 05:38:01 [info]: Configuring route: /v1/cart -> http://cart-service:3001 (Auth: true)
2025-11-22 05:38:01 [info]: Configuring route: /v1/orders -> http://order-service:3002 (Auth: true)
2025-11-22 05:38:01 [info]: ðŸš€ API Gateway started successfully
2025-11-22 05:38:01 [info]: ðŸ“ Environment: development
2025-11-22 05:38:01 [info]: ðŸŒ Port: 3000
2025-11-22 05:38:01 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-22 05:38:01 [info]: ðŸ“Š Redis: Enabled
2025-11-22 05:38:01 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-22 05:38:01 [info]: âœ… Ready to handle requests
2025-11-22 05:38:01 [info]: Redis connected successfully
2025-11-22 05:38:56 [info]: POST /api/auth/login
2025-11-22 05:38:56 [warn]: 404 Not Found: POST /api/auth/login
2025-11-22 05:39:39 [info]: GET /api/books
2025-11-22 05:39:39 [warn]: 404 Not Found: GET /api/books
2025-11-22 05:41:18 [info]: GET /api/books
2025-11-22 05:41:18 [warn]: 404 Not Found: GET /api/books
2025-11-22 05:41:40 [info]: GET /api/books
2025-11-22 05:41:40 [warn]: 404 Not Found: GET /api/books
2025-11-22 05:43:45 [info]: POST /api/auth/register
2025-11-22 05:43:45 [warn]: 404 Not Found: POST /api/auth/register
2025-11-22 05:47:06 [info]: GET /health
2025-11-22 05:48:45 [info]: GET /health
2025-11-22 05:48:46 [info]: POST /v1/auth/login
2025-11-22 05:48:46 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 05:48:46 [debug]: Response from http://auth-service:5000: 400
2025-11-22 05:48:46 [info]: GET /v1/books
2025-11-22 05:48:46 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-22 05:48:46 [debug]: Response from http://book-service:3000: 200
2025-11-22 05:48:46 [info]: GET /v1/cart
2025-11-22 05:48:46 [warn]: Authentication failed: No token provided for GET /
2025-11-22 05:49:18 [info]: POST /api/auth/register
2025-11-22 05:49:18 [warn]: 404 Not Found: POST /api/auth/register
2025-11-22 05:49:20 [info]: POST /api/auth/register
2025-11-22 05:49:20 [warn]: 404 Not Found: POST /api/auth/register
2025-11-22 05:49:22 [info]: POST /api/auth/register
2025-11-22 05:49:22 [warn]: 404 Not Found: POST /api/auth/register
2025-11-22 05:49:28 [info]: POST /api/register
2025-11-22 05:49:28 [warn]: 404 Not Found: POST /api/register
2025-11-22 05:49:47 [info]: POST /api/auth/register
2025-11-22 05:49:47 [warn]: 404 Not Found: POST /api/auth/register
2025-11-22 05:51:24 [info]: GET /health
2025-11-22 05:51:37 [info]: POST /v1/auth/register
2025-11-22 05:51:37 [debug]: Proxying: /v1/auth/register -> http://auth-service:5000/api/auth/register
2025-11-22 05:51:37 [debug]: Response from http://auth-service:5000: 400
2025-11-22 05:53:04 [info]: SIGTERM received, starting graceful shutdown...
2025-11-22 05:53:04 [info]: HTTP server closed
2025-11-22 05:53:04 [info]: Redis connection closed
2025-11-22 05:53:04 [info]: SIGINT received, starting graceful shutdown...
2025-11-22 05:53:04 [info]: HTTP server closed
2025-11-22 05:53:04 [error]: Error closing Redis connection: Connection is closed.
2025-11-22 05:53:04 [info]: SIGINT received, starting graceful shutdown...
2025-11-22 05:53:04 [info]: HTTP server closed
2025-11-22 05:53:04 [error]: Error closing Redis connection: Connection is closed.
2025-11-22 05:53:05 [info]: Shutdown complete, exiting process
2025-11-22 05:53:07 [info]: Configuring route: /v1/auth -> http://auth-service:5000 (Auth: false)
2025-11-22 05:53:07 [info]: Configuring route: /v1/books -> http://book-service:3000 (Auth: false)
2025-11-22 05:53:07 [info]: Configuring route: /v1/cart -> http://cart-service:3001 (Auth: true)
2025-11-22 05:53:07 [info]: Configuring route: /v1/orders -> http://order-service:3002 (Auth: true)
2025-11-22 05:53:07 [info]: ðŸš€ API Gateway started successfully
2025-11-22 05:53:07 [info]: ðŸ“ Environment: development
2025-11-22 05:53:07 [info]: ðŸŒ Port: 3000
2025-11-22 05:53:07 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-22 05:53:07 [info]: ðŸ“Š Redis: Enabled
2025-11-22 05:53:07 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-22 05:53:07 [info]: âœ… Ready to handle requests
2025-11-22 05:53:07 [info]: Redis connected successfully
2025-11-22 05:53:25 [info]: POST /v1/auth/register
2025-11-22 05:53:25 [debug]: Proxying: /v1/auth/register -> http://auth-service:5000/api/auth/register
2025-11-22 05:53:25 [debug]: Response from http://auth-service:5000: 400
2025-11-22 05:53:50 [info]: POST /v1/auth/register
2025-11-22 05:53:50 [debug]: Proxying: /v1/auth/register -> http://auth-service:5000/api/auth/register
2025-11-22 05:53:50 [debug]: Response from http://auth-service:5000: 201
2025-11-22 05:54:23 [info]: POST /api/auth/register
2025-11-22 05:54:23 [warn]: 404 Not Found: POST /api/auth/register
2025-11-22 05:54:32 [info]: POST /v1/auth/register
2025-11-22 05:54:32 [debug]: Proxying: /v1/auth/register -> http://auth-service:5000/api/auth/register
2025-11-22 05:54:32 [debug]: Response from http://auth-service:5000: 400
2025-11-22 05:54:36 [info]: POST /v1/auth/register
2025-11-22 05:54:36 [debug]: Proxying: /v1/auth/register -> http://auth-service:5000/api/auth/register
2025-11-22 05:54:36 [debug]: Response from http://auth-service:5000: 400
2025-11-22 05:54:38 [info]: POST /v1/auth/register
2025-11-22 05:54:38 [debug]: Proxying: /v1/auth/register -> http://auth-service:5000/api/auth/register
2025-11-22 05:54:38 [debug]: Response from http://auth-service:5000: 400
2025-11-22 05:54:40 [info]: POST /v1/auth/register
2025-11-22 05:54:40 [debug]: Proxying: /v1/auth/register -> http://auth-service:5000/api/auth/register
2025-11-22 05:54:40 [debug]: Response from http://auth-service:5000: 400
2025-11-22 05:54:50 [info]: POST /v1/auth/register
2025-11-22 05:54:50 [debug]: Proxying: /v1/auth/register -> http://auth-service:5000/api/auth/register
2025-11-22 05:54:50 [debug]: Response from http://auth-service:5000: 201
2025-11-22 05:55:21 [info]: GET /api/books
2025-11-22 05:55:21 [warn]: 404 Not Found: GET /api/books
2025-11-22 05:55:25 [info]: GET /v2/books
2025-11-22 05:55:25 [warn]: 404 Not Found: GET /v2/books
2025-11-22 05:55:28 [info]: GET /v1/books
2025-11-22 05:55:28 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-22 05:55:28 [debug]: Response from http://book-service:3000: 200
2025-11-22 05:55:56 [info]: POST /api/auth/login
2025-11-22 05:55:56 [warn]: 404 Not Found: POST /api/auth/login
2025-11-22 05:56:03 [info]: POST /v1/auth/login
2025-11-22 05:56:03 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 05:56:03 [debug]: Response from http://auth-service:5000: 200
2025-11-22 05:58:11 [info]: GET /v1/user/profile
2025-11-22 05:58:11 [warn]: 404 Not Found: GET /v1/user/profile
2025-11-22 05:58:34 [info]: POST /v1/auth/login
2025-11-22 05:58:34 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 05:58:35 [debug]: Response from http://auth-service:5000: 200
2025-11-22 05:59:55 [info]: GET /v1/user/profile
2025-11-22 05:59:55 [warn]: 404 Not Found: GET /v1/user/profile
2025-11-22 06:00:14 [info]: GET /v1/books
2025-11-22 06:00:14 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-22 06:00:14 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:01:05 [info]: SIGTERM received, starting graceful shutdown...
2025-11-22 06:01:05 [info]: HTTP server closed
2025-11-22 06:01:05 [info]: Redis connection closed
2025-11-22 06:01:05 [info]: SIGINT received, starting graceful shutdown...
2025-11-22 06:01:05 [info]: HTTP server closed
2025-11-22 06:01:05 [error]: Error closing Redis connection: Connection is closed.
2025-11-22 06:01:05 [info]: SIGINT received, starting graceful shutdown...
2025-11-22 06:01:05 [info]: HTTP server closed
2025-11-22 06:01:05 [error]: Error closing Redis connection: Connection is closed.
2025-11-22 06:01:06 [info]: Shutdown complete, exiting process
2025-11-22 06:01:07 [info]: Configuring route: /v1/auth -> http://auth-service:5000 (Auth: false)
2025-11-22 06:01:07 [info]: Configuring route: /v1/user -> http://auth-service:5000 (Auth: true)
2025-11-22 06:01:07 [info]: Configuring route: /v1/books -> http://book-service:3000 (Auth: false)
2025-11-22 06:01:07 [info]: Configuring route: /v1/cart -> http://cart-service:3001 (Auth: true)
2025-11-22 06:01:07 [info]: Configuring route: /v1/orders -> http://order-service:3002 (Auth: true)
2025-11-22 06:01:07 [info]: ðŸš€ API Gateway started successfully
2025-11-22 06:01:07 [info]: ðŸ“ Environment: development
2025-11-22 06:01:07 [info]: ðŸŒ Port: 3000
2025-11-22 06:01:07 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-22 06:01:07 [info]: ðŸ“Š Redis: Enabled
2025-11-22 06:01:07 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-22 06:01:07 [info]: âœ… Ready to handle requests
2025-11-22 06:01:07 [info]: Redis connected successfully
2025-11-22 06:02:58 [info]: GET /health
2025-11-22 06:02:58 [info]: POST /v1/auth/register
2025-11-22 06:02:58 [debug]: Proxying: /v1/auth/register -> http://auth-service:5000/api/auth/register
2025-11-22 06:02:58 [debug]: Response from http://auth-service:5000: 201
2025-11-22 06:02:59 [info]: POST /v1/auth/login
2025-11-22 06:02:59 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:02:59 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:02:59 [info]: GET /v1/user/profile
2025-11-22 06:02:59 [warn]: Authentication failed: No token provided for GET /profile
2025-11-22 06:02:59 [info]: GET /v1/books
2025-11-22 06:02:59 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-22 06:02:59 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:02:59 [info]: GET /v1/books/search
2025-11-22 06:02:59 [debug]: Proxying: /v1/books/search?query=test -> http://book-service:3000/api/books/search?query=test
2025-11-22 06:02:59 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:02:59 [info]: GET /v1/cart
2025-11-22 06:02:59 [warn]: Authentication failed: No token provided for GET /
2025-11-22 06:02:59 [info]: POST /v1/cart/add
2025-11-22 06:02:59 [warn]: Authentication failed: No token provided for POST /add
2025-11-22 06:02:59 [info]: GET /v1/orders
2025-11-22 06:02:59 [warn]: Authentication failed: No token provided for GET /
2025-11-22 06:02:59 [info]: GET /v1/books/69202da8473b4dce4dfe8918
2025-11-22 06:02:59 [debug]: Proxying: /v1/books/69202da8473b4dce4dfe8918 -> http://book-service:3000/api/books/69202da8473b4dce4dfe8918
2025-11-22 06:02:59 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:02:59 [info]: POST /v1/auth/logout
2025-11-22 06:02:59 [debug]: Proxying: /v1/auth/logout -> http://auth-service:5000/api/auth/logout
2025-11-22 06:02:59 [debug]: Response from http://auth-service:5000: 204
2025-11-22 06:03:49 [info]: POST /v1/auth/login
2025-11-22 06:03:49 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:03:49 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:03:49 [info]: GET /v1/user/profile
2025-11-22 06:03:49 [warn]: Authentication failed: No token provided for GET /profile
2025-11-22 06:04:04 [info]: POST /v1/auth/login
2025-11-22 06:04:04 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:04:05 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:04:05 [info]: GET /v1/cart
2025-11-22 06:04:05 [warn]: Authentication failed: No token provided for GET /
2025-11-22 06:07:56 [info]: SIGTERM received, starting graceful shutdown...
2025-11-22 06:07:56 [info]: HTTP server closed
2025-11-22 06:07:56 [info]: Redis connection closed
2025-11-22 06:07:56 [info]: SIGINT received, starting graceful shutdown...
2025-11-22 06:07:56 [info]: HTTP server closed
2025-11-22 06:07:56 [error]: Error closing Redis connection: Connection is closed.
2025-11-22 06:07:56 [info]: SIGINT received, starting graceful shutdown...
2025-11-22 06:07:56 [info]: HTTP server closed
2025-11-22 06:07:56 [error]: Error closing Redis connection: Connection is closed.
2025-11-22 06:07:57 [info]: Shutdown complete, exiting process
2025-11-22 06:07:58 [info]: Configuring route: /v1/auth -> http://auth-service:5000 (Auth: false)
2025-11-22 06:07:58 [info]: Configuring route: /v1/user -> http://auth-service:5000 (Auth: true)
2025-11-22 06:07:58 [info]: Configuring route: /v1/books -> http://book-service:3000 (Auth: false)
2025-11-22 06:07:58 [info]: Configuring route: /v1/cart -> http://cart-service:3001 (Auth: true)
2025-11-22 06:07:58 [info]: Configuring route: /v1/orders -> http://order-service:3002 (Auth: true)
2025-11-22 06:07:58 [info]: ðŸš€ API Gateway started successfully
2025-11-22 06:07:58 [info]: ðŸ“ Environment: development
2025-11-22 06:07:58 [info]: ðŸŒ Port: 3000
2025-11-22 06:07:58 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-22 06:07:58 [info]: ðŸ“Š Redis: Enabled
2025-11-22 06:07:58 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-22 06:07:58 [info]: âœ… Ready to handle requests
2025-11-22 06:07:58 [info]: Redis connected successfully
2025-11-22 06:08:05 [info]: POST /v1/auth/login
2025-11-22 06:08:05 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:08:05 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:08:05 [info]: GET /v1/user/profile
2025-11-22 06:08:05 [debug]: Auth middleware - Headers: {"authorization":"Bearer","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:08:05 [debug]: Auth middleware - Path: /profile, OriginalUrl: /v1/user/profile
2025-11-22 06:08:05 [debug]: Auth middleware - Authorization header: Bearer
2025-11-22 06:08:05 [warn]: Authentication failed: No token provided for GET /profile
2025-11-22 06:09:06 [info]: POST /v1/auth/login
2025-11-22 06:09:06 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:09:06 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:09:07 [info]: GET /v1/user/profile
2025-11-22 06:09:07 [debug]: Auth middleware - Headers: {"authorization":"Bearer","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:09:07 [debug]: Auth middleware - Path: /profile, OriginalUrl: /v1/user/profile
2025-11-22 06:09:07 [debug]: Auth middleware - Authorization header: Bearer
2025-11-22 06:09:07 [warn]: Authentication failed: No token provided for GET /profile
2025-11-22 06:09:57 [info]: SIGTERM received, starting graceful shutdown...
2025-11-22 06:09:57 [info]: HTTP server closed
2025-11-22 06:09:57 [info]: Redis connection closed
2025-11-22 06:09:57 [info]: SIGINT received, starting graceful shutdown...
2025-11-22 06:09:57 [info]: HTTP server closed
2025-11-22 06:09:57 [error]: Error closing Redis connection: Connection is closed.
2025-11-22 06:09:57 [info]: SIGINT received, starting graceful shutdown...
2025-11-22 06:09:57 [info]: HTTP server closed
2025-11-22 06:09:57 [error]: Error closing Redis connection: Connection is closed.
2025-11-22 06:09:58 [info]: Shutdown complete, exiting process
2025-11-22 06:09:59 [info]: Configuring route: /v1/auth -> http://auth-service:5000 (Auth: false)
2025-11-22 06:09:59 [info]: Configuring route: /v1/user -> http://auth-service:5000 (Auth: true)
2025-11-22 06:09:59 [info]: Configuring route: /v1/books -> http://book-service:3000 (Auth: false)
2025-11-22 06:09:59 [info]: Configuring route: /v1/cart -> http://cart-service:3001 (Auth: true)
2025-11-22 06:09:59 [info]: Configuring route: /v1/orders -> http://order-service:3002 (Auth: true)
2025-11-22 06:09:59 [info]: ðŸš€ API Gateway started successfully
2025-11-22 06:09:59 [info]: ðŸ“ Environment: development
2025-11-22 06:09:59 [info]: ðŸŒ Port: 3000
2025-11-22 06:09:59 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-22 06:09:59 [info]: ðŸ“Š Redis: Enabled
2025-11-22 06:09:59 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-22 06:09:59 [info]: âœ… Ready to handle requests
2025-11-22 06:09:59 [info]: Redis connected successfully
2025-11-22 06:10:07 [info]: GET /health
2025-11-22 06:10:08 [info]: POST /v1/auth/register
2025-11-22 06:10:08 [debug]: Proxying: /v1/auth/register -> http://auth-service:5000/api/auth/register
2025-11-22 06:10:08 [debug]: Response from http://auth-service:5000: 400
2025-11-22 06:10:08 [info]: POST /v1/auth/login
2025-11-22 06:10:08 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:10:08 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:10:08 [info]: GET /v1/user/profile
2025-11-22 06:10:08 [error]: Authentication error: token is not defined
2025-11-22 06:10:08 [info]: GET /v1/books
2025-11-22 06:10:08 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-22 06:10:08 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:10:08 [info]: GET /v1/books/search
2025-11-22 06:10:08 [debug]: Proxying: /v1/books/search?query=test -> http://book-service:3000/api/books/search?query=test
2025-11-22 06:10:08 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:10:08 [info]: GET /v1/cart
2025-11-22 06:10:08 [error]: Authentication error: token is not defined
2025-11-22 06:10:08 [info]: POST /v1/cart/add
2025-11-22 06:10:08 [error]: Authentication error: token is not defined
2025-11-22 06:10:08 [info]: GET /v1/orders
2025-11-22 06:10:08 [error]: Authentication error: token is not defined
2025-11-22 06:10:08 [info]: GET /v1/books/69202da8473b4dce4dfe8918
2025-11-22 06:10:08 [debug]: Proxying: /v1/books/69202da8473b4dce4dfe8918 -> http://book-service:3000/api/books/69202da8473b4dce4dfe8918
2025-11-22 06:10:08 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:10:08 [info]: POST /v1/auth/logout
2025-11-22 06:10:08 [debug]: Proxying: /v1/auth/logout -> http://auth-service:5000/api/auth/logout
2025-11-22 06:10:08 [debug]: Response from http://auth-service:5000: 204
2025-11-22 06:10:39 [info]: SIGTERM received, starting graceful shutdown...
2025-11-22 06:10:39 [info]: HTTP server closed
2025-11-22 06:10:39 [info]: Redis connection closed
2025-11-22 06:10:39 [info]: SIGINT received, starting graceful shutdown...
2025-11-22 06:10:39 [info]: HTTP server closed
2025-11-22 06:10:39 [error]: Error closing Redis connection: Connection is closed.
2025-11-22 06:10:39 [info]: SIGINT received, starting graceful shutdown...
2025-11-22 06:10:39 [info]: HTTP server closed
2025-11-22 06:10:39 [error]: Error closing Redis connection: Connection is closed.
2025-11-22 06:10:40 [info]: Shutdown complete, exiting process
2025-11-22 06:10:41 [info]: Configuring route: /v1/auth -> http://auth-service:5000 (Auth: false)
2025-11-22 06:10:41 [info]: Configuring route: /v1/user -> http://auth-service:5000 (Auth: true)
2025-11-22 06:10:41 [info]: Configuring route: /v1/books -> http://book-service:3000 (Auth: false)
2025-11-22 06:10:41 [info]: Configuring route: /v1/cart -> http://cart-service:3001 (Auth: true)
2025-11-22 06:10:41 [info]: Configuring route: /v1/orders -> http://order-service:3002 (Auth: true)
2025-11-22 06:10:41 [info]: ðŸš€ API Gateway started successfully
2025-11-22 06:10:41 [info]: ðŸ“ Environment: development
2025-11-22 06:10:41 [info]: ðŸŒ Port: 3000
2025-11-22 06:10:41 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-22 06:10:41 [info]: ðŸ“Š Redis: Enabled
2025-11-22 06:10:41 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-22 06:10:41 [info]: âœ… Ready to handle requests
2025-11-22 06:10:41 [info]: Redis connected successfully
2025-11-22 06:10:43 [info]: GET /health
2025-11-22 06:10:43 [info]: POST /v1/auth/register
2025-11-22 06:10:43 [debug]: Proxying: /v1/auth/register -> http://auth-service:5000/api/auth/register
2025-11-22 06:10:43 [debug]: Response from http://auth-service:5000: 400
2025-11-22 06:10:43 [info]: POST /v1/auth/login
2025-11-22 06:10:43 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:10:43 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:10:43 [info]: GET /v1/user/profile
2025-11-22 06:10:43 [debug]: Auth middleware - Headers: {"authorization":"Bearer","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:10:43 [debug]: Auth middleware - Path: /profile, OriginalUrl: /v1/user/profile
2025-11-22 06:10:43 [debug]: Auth middleware - Authorization header: Bearer
2025-11-22 06:10:43 [warn]: Authentication failed: No token provided for GET /profile
2025-11-22 06:10:43 [info]: GET /v1/books
2025-11-22 06:10:43 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-22 06:10:43 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:10:43 [info]: GET /v1/books/search
2025-11-22 06:10:43 [debug]: Proxying: /v1/books/search?query=test -> http://book-service:3000/api/books/search?query=test
2025-11-22 06:10:43 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:10:43 [info]: GET /v1/cart
2025-11-22 06:10:43 [debug]: Auth middleware - Headers: {"authorization":"Bearer","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:10:43 [debug]: Auth middleware - Path: /, OriginalUrl: /v1/cart
2025-11-22 06:10:43 [debug]: Auth middleware - Authorization header: Bearer
2025-11-22 06:10:43 [warn]: Authentication failed: No token provided for GET /
2025-11-22 06:10:44 [info]: POST /v1/cart/add
2025-11-22 06:10:44 [debug]: Auth middleware - Headers: {"authorization":"Bearer","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","content-type":"application/json","host":"localhost:3000","content-length":"50"}
2025-11-22 06:10:44 [debug]: Auth middleware - Path: /add, OriginalUrl: /v1/cart/add
2025-11-22 06:10:44 [debug]: Auth middleware - Authorization header: Bearer
2025-11-22 06:10:44 [warn]: Authentication failed: No token provided for POST /add
2025-11-22 06:10:44 [info]: GET /v1/orders
2025-11-22 06:10:44 [debug]: Auth middleware - Headers: {"authorization":"Bearer","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:10:44 [debug]: Auth middleware - Path: /, OriginalUrl: /v1/orders
2025-11-22 06:10:44 [debug]: Auth middleware - Authorization header: Bearer
2025-11-22 06:10:44 [warn]: Authentication failed: No token provided for GET /
2025-11-22 06:10:44 [info]: GET /v1/books/69202da8473b4dce4dfe8918
2025-11-22 06:10:44 [debug]: Proxying: /v1/books/69202da8473b4dce4dfe8918 -> http://book-service:3000/api/books/69202da8473b4dce4dfe8918
2025-11-22 06:10:44 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:10:44 [info]: POST /v1/auth/logout
2025-11-22 06:10:44 [debug]: Proxying: /v1/auth/logout -> http://auth-service:5000/api/auth/logout
2025-11-22 06:10:44 [debug]: Response from http://auth-service:5000: 204
2025-11-22 06:12:36 [info]: POST /v1/auth/login
2025-11-22 06:12:36 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:12:36 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:14:01 [info]: SIGTERM received, starting graceful shutdown...
2025-11-22 06:14:01 [info]: HTTP server closed
2025-11-22 06:14:01 [info]: Redis connection closed
2025-11-22 06:14:01 [info]: SIGINT received, starting graceful shutdown...
2025-11-22 06:14:01 [info]: HTTP server closed
2025-11-22 06:14:01 [error]: Error closing Redis connection: Connection is closed.
2025-11-22 06:14:01 [info]: SIGINT received, starting graceful shutdown...
2025-11-22 06:14:01 [info]: HTTP server closed
2025-11-22 06:14:01 [error]: Error closing Redis connection: Connection is closed.
2025-11-22 06:14:02 [info]: Shutdown complete, exiting process
2025-11-22 06:14:04 [info]: Configuring route: /v1/auth -> http://auth-service:5000 (Auth: false)
2025-11-22 06:14:04 [info]: Configuring route: /v1/user -> http://auth-service:5000 (Auth: true)
2025-11-22 06:14:04 [info]: Configuring route: /v1/books -> http://book-service:3000 (Auth: false)
2025-11-22 06:14:04 [info]: Configuring route: /v1/cart -> http://cart-service:3001 (Auth: true)
2025-11-22 06:14:04 [info]: Configuring route: /v1/orders -> http://order-service:3002 (Auth: true)
2025-11-22 06:14:04 [info]: ðŸš€ API Gateway started successfully
2025-11-22 06:14:04 [info]: ðŸ“ Environment: development
2025-11-22 06:14:04 [info]: ðŸŒ Port: 3000
2025-11-22 06:14:04 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-22 06:14:04 [info]: ðŸ“Š Redis: Enabled
2025-11-22 06:14:04 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-22 06:14:04 [info]: âœ… Ready to handle requests
2025-11-22 06:14:04 [info]: Redis connected successfully
2025-11-22 06:14:15 [info]: GET /health
2025-11-22 06:14:15 [info]: POST /v1/auth/register
2025-11-22 06:14:15 [debug]: Proxying: /v1/auth/register -> http://auth-service:5000/api/auth/register
2025-11-22 06:14:15 [debug]: Response from http://auth-service:5000: 400
2025-11-22 06:14:15 [info]: POST /v1/auth/login
2025-11-22 06:14:15 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:14:15 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:14:15 [info]: GET /v1/user/profile
2025-11-22 06:14:15 [debug]: Auth middleware - Headers: {"authorization":"Bearer","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:14:15 [debug]: Auth middleware - Path: /profile, OriginalUrl: /v1/user/profile
2025-11-22 06:14:15 [debug]: Auth middleware - Authorization header: Bearer
2025-11-22 06:14:15 [warn]: Authentication failed: No token provided for GET /profile
2025-11-22 06:14:15 [info]: GET /v1/books
2025-11-22 06:14:15 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-22 06:14:15 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:14:15 [info]: GET /v1/books/search
2025-11-22 06:14:15 [debug]: Proxying: /v1/books/search?query=test -> http://book-service:3000/api/books/search?query=test
2025-11-22 06:14:15 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:14:15 [info]: GET /v1/cart
2025-11-22 06:14:15 [debug]: Auth middleware - Headers: {"authorization":"Bearer","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:14:15 [debug]: Auth middleware - Path: /, OriginalUrl: /v1/cart
2025-11-22 06:14:15 [debug]: Auth middleware - Authorization header: Bearer
2025-11-22 06:14:15 [warn]: Authentication failed: No token provided for GET /
2025-11-22 06:14:15 [info]: POST /v1/cart/add
2025-11-22 06:14:15 [debug]: Auth middleware - Headers: {"authorization":"Bearer","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","content-type":"application/json","host":"localhost:3000","content-length":"50"}
2025-11-22 06:14:15 [debug]: Auth middleware - Path: /add, OriginalUrl: /v1/cart/add
2025-11-22 06:14:15 [debug]: Auth middleware - Authorization header: Bearer
2025-11-22 06:14:15 [warn]: Authentication failed: No token provided for POST /add
2025-11-22 06:14:15 [info]: GET /v1/orders
2025-11-22 06:14:15 [debug]: Auth middleware - Headers: {"authorization":"Bearer","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:14:15 [debug]: Auth middleware - Path: /, OriginalUrl: /v1/orders
2025-11-22 06:14:15 [debug]: Auth middleware - Authorization header: Bearer
2025-11-22 06:14:15 [warn]: Authentication failed: No token provided for GET /
2025-11-22 06:14:15 [info]: GET /v1/books/69202da8473b4dce4dfe8918
2025-11-22 06:14:15 [debug]: Proxying: /v1/books/69202da8473b4dce4dfe8918 -> http://book-service:3000/api/books/69202da8473b4dce4dfe8918
2025-11-22 06:14:15 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:14:15 [info]: POST /v1/auth/logout
2025-11-22 06:14:15 [debug]: Proxying: /v1/auth/logout -> http://auth-service:5000/api/auth/logout
2025-11-22 06:14:15 [debug]: Response from http://auth-service:5000: 204
2025-11-22 06:16:09 [info]: POST /v1/auth/login
2025-11-22 06:16:09 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:16:09 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:16:28 [info]: GET /health
2025-11-22 06:16:28 [info]: POST /v1/auth/register
2025-11-22 06:16:28 [debug]: Proxying: /v1/auth/register -> http://auth-service:5000/api/auth/register
2025-11-22 06:16:28 [debug]: Response from http://auth-service:5000: 400
2025-11-22 06:16:28 [info]: POST /v1/auth/login
2025-11-22 06:16:28 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:16:28 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:16:28 [info]: GET /v1/user/profile
2025-11-22 06:16:28 [debug]: Auth middleware - Headers: {"authorization":"Bearer","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:16:28 [debug]: Auth middleware - Path: /profile, OriginalUrl: /v1/user/profile
2025-11-22 06:16:28 [debug]: Auth middleware - Authorization header: Bearer
2025-11-22 06:16:28 [warn]: Authentication failed: No token provided for GET /profile
2025-11-22 06:16:28 [info]: GET /v1/books
2025-11-22 06:16:28 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-22 06:16:28 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:16:28 [info]: GET /v1/books/search
2025-11-22 06:16:28 [debug]: Proxying: /v1/books/search?query=test -> http://book-service:3000/api/books/search?query=test
2025-11-22 06:16:29 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:16:29 [info]: GET /v1/cart
2025-11-22 06:16:29 [debug]: Auth middleware - Headers: {"authorization":"Bearer","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:16:29 [debug]: Auth middleware - Path: /, OriginalUrl: /v1/cart
2025-11-22 06:16:29 [debug]: Auth middleware - Authorization header: Bearer
2025-11-22 06:16:29 [warn]: Authentication failed: No token provided for GET /
2025-11-22 06:16:29 [info]: POST /v1/cart/add
2025-11-22 06:16:29 [debug]: Auth middleware - Headers: {"authorization":"Bearer","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","content-type":"application/json","host":"localhost:3000","content-length":"50"}
2025-11-22 06:16:29 [debug]: Auth middleware - Path: /add, OriginalUrl: /v1/cart/add
2025-11-22 06:16:29 [debug]: Auth middleware - Authorization header: Bearer
2025-11-22 06:16:29 [warn]: Authentication failed: No token provided for POST /add
2025-11-22 06:16:29 [info]: GET /v1/orders
2025-11-22 06:16:29 [debug]: Auth middleware - Headers: {"authorization":"Bearer","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:16:29 [debug]: Auth middleware - Path: /, OriginalUrl: /v1/orders
2025-11-22 06:16:29 [debug]: Auth middleware - Authorization header: Bearer
2025-11-22 06:16:29 [warn]: Authentication failed: No token provided for GET /
2025-11-22 06:16:29 [info]: GET /v1/books/69202da8473b4dce4dfe8918
2025-11-22 06:16:29 [debug]: Proxying: /v1/books/69202da8473b4dce4dfe8918 -> http://book-service:3000/api/books/69202da8473b4dce4dfe8918
2025-11-22 06:16:29 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:16:29 [info]: POST /v1/auth/logout
2025-11-22 06:16:29 [debug]: Proxying: /v1/auth/logout -> http://auth-service:5000/api/auth/logout
2025-11-22 06:16:29 [debug]: Response from http://auth-service:5000: 204
2025-11-22 06:17:11 [info]: POST /v1/auth/login
2025-11-22 06:17:11 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:17:11 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:17:12 [info]: GET /v1/user/profile
2025-11-22 06:17:12 [debug]: Auth middleware - Headers: {"authorization":"Bearer","user-agent":"PowerShell","host":"localhost:3000"}
2025-11-22 06:17:12 [debug]: Auth middleware - Path: /profile, OriginalUrl: /v1/user/profile
2025-11-22 06:17:12 [debug]: Auth middleware - Authorization header: Bearer
2025-11-22 06:17:12 [warn]: Authentication failed: No token provided for GET /profile
2025-11-22 06:18:30 [info]: POST /v1/auth/login
2025-11-22 06:18:30 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:18:30 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:19:44 [info]: GET /health
2025-11-22 06:19:44 [info]: POST /v1/auth/register
2025-11-22 06:19:44 [debug]: Proxying: /v1/auth/register -> http://auth-service:5000/api/auth/register
2025-11-22 06:19:44 [debug]: Response from http://auth-service:5000: 201
2025-11-22 06:19:44 [info]: POST /v1/auth/login
2025-11-22 06:19:44 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:19:44 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:19:44 [info]: GET /v1/user/profile
2025-11-22 06:19:44 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjM4NCwiZXhwIjoxNzYzNzk1OTg0fQ.cow88KKHkhyvGyXBT6WmAgzlKMdDhg7BhOapzvnX9eU","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:19:44 [debug]: Auth middleware - Path: /profile, OriginalUrl: /v1/user/profile
2025-11-22 06:19:44 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjM4NCwiZXhwIjoxNzYzNzk1OTg0fQ.cow88KKHkhyvGyXBT6WmAgzlKMdDhg7BhOapzvnX9eU
2025-11-22 06:19:44 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:19:44 [warn]: Invalid token for GET /profile: invalid signature
2025-11-22 06:19:44 [info]: GET /v1/books
2025-11-22 06:19:44 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-22 06:19:44 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:19:45 [info]: GET /v1/books/search
2025-11-22 06:19:45 [debug]: Proxying: /v1/books/search?query=test -> http://book-service:3000/api/books/search?query=test
2025-11-22 06:19:45 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:19:45 [info]: GET /v1/cart
2025-11-22 06:19:45 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjM4NCwiZXhwIjoxNzYzNzk1OTg0fQ.cow88KKHkhyvGyXBT6WmAgzlKMdDhg7BhOapzvnX9eU","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:19:45 [debug]: Auth middleware - Path: /, OriginalUrl: /v1/cart
2025-11-22 06:19:45 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjM4NCwiZXhwIjoxNzYzNzk1OTg0fQ.cow88KKHkhyvGyXBT6WmAgzlKMdDhg7BhOapzvnX9eU
2025-11-22 06:19:45 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:19:45 [warn]: Invalid token for GET /: invalid signature
2025-11-22 06:19:45 [info]: POST /v1/cart/add
2025-11-22 06:19:45 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjM4NCwiZXhwIjoxNzYzNzk1OTg0fQ.cow88KKHkhyvGyXBT6WmAgzlKMdDhg7BhOapzvnX9eU","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","content-type":"application/json","host":"localhost:3000","content-length":"50"}
2025-11-22 06:19:45 [debug]: Auth middleware - Path: /add, OriginalUrl: /v1/cart/add
2025-11-22 06:19:45 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjM4NCwiZXhwIjoxNzYzNzk1OTg0fQ.cow88KKHkhyvGyXBT6WmAgzlKMdDhg7BhOapzvnX9eU
2025-11-22 06:19:45 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:19:45 [warn]: Invalid token for POST /add: invalid signature
2025-11-22 06:19:45 [info]: GET /v1/orders
2025-11-22 06:19:45 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjM4NCwiZXhwIjoxNzYzNzk1OTg0fQ.cow88KKHkhyvGyXBT6WmAgzlKMdDhg7BhOapzvnX9eU","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:19:45 [debug]: Auth middleware - Path: /, OriginalUrl: /v1/orders
2025-11-22 06:19:45 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjM4NCwiZXhwIjoxNzYzNzk1OTg0fQ.cow88KKHkhyvGyXBT6WmAgzlKMdDhg7BhOapzvnX9eU
2025-11-22 06:19:45 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:19:45 [warn]: Invalid token for GET /: invalid signature
2025-11-22 06:19:45 [info]: GET /v1/books/69202da8473b4dce4dfe8918
2025-11-22 06:19:45 [debug]: Proxying: /v1/books/69202da8473b4dce4dfe8918 -> http://book-service:3000/api/books/69202da8473b4dce4dfe8918
2025-11-22 06:19:45 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:19:45 [info]: POST /v1/auth/logout
2025-11-22 06:19:45 [debug]: Optional auth: Invalid or expired token, continuing without auth
2025-11-22 06:19:45 [debug]: Proxying: /v1/auth/logout -> http://auth-service:5000/api/auth/logout
2025-11-22 06:19:45 [debug]: Response from http://auth-service:5000: 204
2025-11-22 06:20:09 [info]: POST /v1/auth/login
2025-11-22 06:20:09 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:20:09 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:20:09 [info]: GET /v1/user/profile
2025-11-22 06:20:09 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjQwOSwiZXhwIjoxNzYzNzk2MDA5fQ.yD-85VBCGntSWsPEm3XXKpB5PSVRUQf0PTv4BGpFLUg","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:20:09 [debug]: Auth middleware - Path: /profile, OriginalUrl: /v1/user/profile
2025-11-22 06:20:09 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjQwOSwiZXhwIjoxNzYzNzk2MDA5fQ.yD-85VBCGntSWsPEm3XXKpB5PSVRUQf0PTv4BGpFLUg
2025-11-22 06:20:09 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:20:09 [warn]: Invalid token for GET /profile: invalid signature
2025-11-22 06:28:36 [info]: SIGTERM received, starting graceful shutdown...
2025-11-22 06:28:36 [info]: HTTP server closed
2025-11-22 06:28:36 [info]: Redis connection closed
2025-11-22 06:28:36 [info]: SIGINT received, starting graceful shutdown...
2025-11-22 06:28:36 [info]: HTTP server closed
2025-11-22 06:28:36 [error]: Error closing Redis connection: Connection is closed.
2025-11-22 06:28:36 [info]: SIGINT received, starting graceful shutdown...
2025-11-22 06:28:36 [info]: HTTP server closed
2025-11-22 06:28:36 [error]: Error closing Redis connection: Connection is closed.
2025-11-22 06:28:37 [info]: Shutdown complete, exiting process
2025-11-22 06:28:39 [info]: Configuring route: /v1/auth -> http://auth-service:5000 (Auth: false)
2025-11-22 06:28:39 [info]: Configuring route: /v1/user -> http://auth-service:5000 (Auth: true)
2025-11-22 06:28:39 [info]: Configuring route: /v1/books -> http://book-service:3000 (Auth: false)
2025-11-22 06:28:39 [info]: Configuring route: /v1/cart -> http://cart-service:3001 (Auth: true)
2025-11-22 06:28:39 [info]: Configuring route: /v1/orders -> http://order-service:3002 (Auth: true)
2025-11-22 06:28:39 [info]: ðŸš€ API Gateway started successfully
2025-11-22 06:28:39 [info]: ðŸ“ Environment: development
2025-11-22 06:28:39 [info]: ðŸŒ Port: 3000
2025-11-22 06:28:39 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-22 06:28:39 [info]: ðŸ“Š Redis: Enabled
2025-11-22 06:28:39 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-22 06:28:39 [info]: âœ… Ready to handle requests
2025-11-22 06:28:39 [info]: Redis connected successfully
2025-11-22 06:28:42 [info]: GET /health
2025-11-22 06:28:42 [info]: POST /v1/auth/register
2025-11-22 06:28:42 [debug]: Proxying: /v1/auth/register -> http://auth-service:5000/api/auth/register
2025-11-22 06:28:42 [debug]: Response from http://auth-service:5000: 400
2025-11-22 06:28:42 [info]: POST /v1/auth/login
2025-11-22 06:28:42 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:28:43 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:28:43 [info]: GET /v1/user/profile
2025-11-22 06:28:43 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjkyMywiZXhwIjoxNzYzNzk2NTIzfQ.cEAVCm7l3WmImw-dWhtb2L6Md-E-STCbqcxWifVJlzY","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:28:43 [debug]: Auth middleware - Path: /profile, OriginalUrl: /v1/user/profile
2025-11-22 06:28:43 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjkyMywiZXhwIjoxNzYzNzk2NTIzfQ.cEAVCm7l3WmImw-dWhtb2L6Md-E-STCbqcxWifVJlzY
2025-11-22 06:28:43 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:28:43 [debug]: User authenticated: test4@bookverse.com (69215600c9ebaa6ac724df2e)
2025-11-22 06:28:43 [debug]: Proxying: /v1/user/profile -> http://auth-service:5000/api/user/profile
2025-11-22 06:28:43 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:28:43 [info]: GET /v1/books
2025-11-22 06:28:43 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-22 06:28:43 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:28:43 [info]: GET /v1/books/search
2025-11-22 06:28:43 [debug]: Proxying: /v1/books/search?query=test -> http://book-service:3000/api/books/search?query=test
2025-11-22 06:28:43 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:28:43 [info]: GET /v1/cart
2025-11-22 06:28:43 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjkyMywiZXhwIjoxNzYzNzk2NTIzfQ.cEAVCm7l3WmImw-dWhtb2L6Md-E-STCbqcxWifVJlzY","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:28:43 [debug]: Auth middleware - Path: /, OriginalUrl: /v1/cart
2025-11-22 06:28:43 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjkyMywiZXhwIjoxNzYzNzk2NTIzfQ.cEAVCm7l3WmImw-dWhtb2L6Md-E-STCbqcxWifVJlzY
2025-11-22 06:28:43 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:28:43 [debug]: User authenticated: test4@bookverse.com (69215600c9ebaa6ac724df2e)
2025-11-22 06:28:43 [debug]: Proxying: /v1/cart -> http://cart-service:3001/api/cart
2025-11-22 06:28:43 [debug]: Response from http://cart-service:3001: 200
2025-11-22 06:28:43 [info]: POST /v1/cart/add
2025-11-22 06:28:43 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjkyMywiZXhwIjoxNzYzNzk2NTIzfQ.cEAVCm7l3WmImw-dWhtb2L6Md-E-STCbqcxWifVJlzY","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","content-type":"application/json","host":"localhost:3000","content-length":"50"}
2025-11-22 06:28:43 [debug]: Auth middleware - Path: /add, OriginalUrl: /v1/cart/add
2025-11-22 06:28:43 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjkyMywiZXhwIjoxNzYzNzk2NTIzfQ.cEAVCm7l3WmImw-dWhtb2L6Md-E-STCbqcxWifVJlzY
2025-11-22 06:28:43 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:28:43 [debug]: User authenticated: test4@bookverse.com (69215600c9ebaa6ac724df2e)
2025-11-22 06:28:43 [debug]: Proxying: /v1/cart/add -> http://cart-service:3001/api/cart/add
2025-11-22 06:28:44 [debug]: Response from http://cart-service:3001: 200
2025-11-22 06:28:44 [info]: GET /v1/orders
2025-11-22 06:28:44 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjkyMywiZXhwIjoxNzYzNzk2NTIzfQ.cEAVCm7l3WmImw-dWhtb2L6Md-E-STCbqcxWifVJlzY","user-agent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22621.6133","host":"localhost:3000"}
2025-11-22 06:28:44 [debug]: Auth middleware - Path: /, OriginalUrl: /v1/orders
2025-11-22 06:28:44 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1NjAwYzllYmFhNmFjNzI0ZGYyZSIsImVtYWlsIjoidGVzdDRAYm9va3ZlcnNlLmNvbSIsImlhdCI6MTc2Mzc5MjkyMywiZXhwIjoxNzYzNzk2NTIzfQ.cEAVCm7l3WmImw-dWhtb2L6Md-E-STCbqcxWifVJlzY
2025-11-22 06:28:44 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:28:44 [debug]: User authenticated: test4@bookverse.com (69215600c9ebaa6ac724df2e)
2025-11-22 06:28:44 [debug]: Proxying: /v1/orders -> http://order-service:3002/api/orders
2025-11-22 06:28:44 [debug]: Response from http://order-service:3002: 200
2025-11-22 06:28:44 [info]: GET /v1/books/69202da8473b4dce4dfe8918
2025-11-22 06:28:44 [debug]: Proxying: /v1/books/69202da8473b4dce4dfe8918 -> http://book-service:3000/api/books/69202da8473b4dce4dfe8918
2025-11-22 06:28:44 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:28:44 [info]: POST /v1/auth/logout
2025-11-22 06:28:44 [debug]: Optional auth: User authenticated: test4@bookverse.com
2025-11-22 06:28:44 [debug]: Proxying: /v1/auth/logout -> http://auth-service:5000/api/auth/logout
2025-11-22 06:28:44 [debug]: Response from http://auth-service:5000: 204
2025-11-22 06:38:29 [info]: POST /v1/auth/register
2025-11-22 06:38:29 [debug]: Proxying: /v1/auth/register -> http://auth-service:5000/api/auth/register
2025-11-22 06:38:29 [debug]: Response from http://auth-service:5000: 400
2025-11-22 06:38:36 [info]: POST /v1/auth/login
2025-11-22 06:38:36 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:38:36 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:38:40 [info]: POST /v1/auth/login
2025-11-22 06:38:40 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:38:40 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:38:51 [info]: GET /v1/user/profile
2025-11-22 06:38:51 [debug]: Auth middleware - Headers: {"content-type":"application/json","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjAzMGQ0MTg2ODViNDk3MTA0YWUzMyIsImVtYWlsIjoibm95Y2hhbGluaDI0QGtpdC5lZHUua2giLCJpYXQiOjE3NjM3MTc1NjgsImV4cCI6MTc2MzcyMTE2OH0.dT3ORXGsNxZ1mWLJLcB1ALNPbxGtimCMelxRK88NmD0","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"f2c53c18-f571-41d5-9869-1b9caded4ea1","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"75","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D; refreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjQzOTgzMjB9.Bpa-dgEBz111rf2emDPKTw5B9_mEtU4dESk6jZU24kw"}
2025-11-22 06:38:51 [debug]: Auth middleware - Path: /profile, OriginalUrl: /v1/user/profile
2025-11-22 06:38:51 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjAzMGQ0MTg2ODViNDk3MTA0YWUzMyIsImVtYWlsIjoibm95Y2hhbGluaDI0QGtpdC5lZHUua2giLCJpYXQiOjE3NjM3MTc1NjgsImV4cCI6MTc2MzcyMTE2OH0.dT3ORXGsNxZ1mWLJLcB1ALNPbxGtimCMelxRK88NmD0
2025-11-22 06:38:51 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:38:51 [warn]: Token expired for GET /profile
2025-11-22 06:39:22 [info]: GET /v1/user/profile
2025-11-22 06:39:22 [debug]: Auth middleware - Headers: {"content-type":"application/json","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"124ddd4c-f53e-4cac-a419-5625e54e3fe1","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"75","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D; refreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjQzOTgzMjB9.Bpa-dgEBz111rf2emDPKTw5B9_mEtU4dESk6jZU24kw"}
2025-11-22 06:39:22 [debug]: Auth middleware - Path: /profile, OriginalUrl: /v1/user/profile
2025-11-22 06:39:22 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:39:22 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:39:22 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:39:22 [debug]: Proxying: /v1/user/profile -> http://auth-service:5000/api/user/profile
2025-11-22 06:39:22 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:39:46 [info]: POST /v1/auth/register
2025-11-22 06:39:46 [debug]: Proxying: /v1/auth/register -> http://auth-service:5000/api/auth/register
2025-11-22 06:39:46 [debug]: Response from http://auth-service:5000: 400
2025-11-22 06:40:26 [info]: PATCH /v1/user/profile
2025-11-22 06:40:26 [debug]: Auth middleware - Headers: {"content-type":"application/json","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"d17770da-be0a-40d0-ae9e-cc53a7064c07","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"30","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D; refreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjQzOTgzMjB9.Bpa-dgEBz111rf2emDPKTw5B9_mEtU4dESk6jZU24kw"}
2025-11-22 06:40:26 [debug]: Auth middleware - Path: /profile, OriginalUrl: /v1/user/profile
2025-11-22 06:40:26 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:40:26 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:40:26 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:40:26 [debug]: Proxying: /v1/user/profile -> http://auth-service:5000/api/user/profile
2025-11-22 06:40:26 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:41:20 [info]: PATCH /v1/user/password
2025-11-22 06:41:20 [debug]: Auth middleware - Headers: {"content-type":"application/json","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"d0ca02ce-fb5a-4796-a9ae-745149eb3d6b","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"64","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D; refreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjQzOTgzMjB9.Bpa-dgEBz111rf2emDPKTw5B9_mEtU4dESk6jZU24kw"}
2025-11-22 06:41:20 [debug]: Auth middleware - Path: /password, OriginalUrl: /v1/user/password
2025-11-22 06:41:20 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:41:20 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:41:20 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:41:20 [debug]: Proxying: /v1/user/password -> http://auth-service:5000/api/user/password
2025-11-22 06:41:20 [debug]: Response from http://auth-service:5000: 400
2025-11-22 06:42:08 [info]: PATCH /v1/user/password
2025-11-22 06:42:08 [debug]: Auth middleware - Headers: {"content-type":"application/json","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"781f68ed-17a9-4cb5-9021-8b41bd202e18","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"69","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D; refreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjQzOTgzMjB9.Bpa-dgEBz111rf2emDPKTw5B9_mEtU4dESk6jZU24kw"}
2025-11-22 06:42:08 [debug]: Auth middleware - Path: /password, OriginalUrl: /v1/user/password
2025-11-22 06:42:08 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:42:08 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:42:08 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:42:08 [debug]: Proxying: /v1/user/password -> http://auth-service:5000/api/user/password
2025-11-22 06:42:08 [debug]: Response from http://auth-service:5000: 400
2025-11-22 06:42:39 [info]: PATCH /v1/user/password
2025-11-22 06:42:39 [debug]: Auth middleware - Headers: {"content-type":"application/json","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"69ba4b5d-bfb7-4529-a039-88899fca8dfb","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"69","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D; refreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjQzOTgzMjB9.Bpa-dgEBz111rf2emDPKTw5B9_mEtU4dESk6jZU24kw"}
2025-11-22 06:42:39 [debug]: Auth middleware - Path: /password, OriginalUrl: /v1/user/password
2025-11-22 06:42:39 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:42:39 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:42:39 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:42:39 [debug]: Proxying: /v1/user/password -> http://auth-service:5000/api/user/password
2025-11-22 06:42:39 [debug]: Response from http://auth-service:5000: 200
2025-11-22 06:43:15 [info]: POST /v1/auth/logout
2025-11-22 06:43:15 [debug]: Proxying: /v1/auth/logout -> http://auth-service:5000/api/auth/logout
2025-11-22 06:43:15 [debug]: Response from http://auth-service:5000: 204
2025-11-22 06:43:27 [info]: PATCH /v1/user/password
2025-11-22 06:43:27 [debug]: Auth middleware - Headers: {"content-type":"application/json","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"beaeec70-9738-4063-a4cf-97fe9131c0e1","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"69","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:43:27 [debug]: Auth middleware - Path: /password, OriginalUrl: /v1/user/password
2025-11-22 06:43:27 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:43:27 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:43:27 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:43:27 [debug]: Proxying: /v1/user/password -> http://auth-service:5000/api/user/password
2025-11-22 06:43:27 [debug]: Response from http://auth-service:5000: 400
2025-11-22 06:43:38 [info]: GET /v1/books
2025-11-22 06:43:38 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-22 06:43:38 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:43:41 [info]: GET /api/books/search
2025-11-22 06:43:41 [warn]: 404 Not Found: GET /api/books/search
2025-11-22 06:43:50 [info]: GET /v1/books/search
2025-11-22 06:43:50 [debug]: Proxying: /v1/books/search?query=bob -> http://book-service:3000/api/books/search?query=bob
2025-11-22 06:43:50 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:44:05 [info]: GET /v1/books/69202da8473b4dce4dfe8918
2025-11-22 06:44:05 [debug]: Proxying: /v1/books/69202da8473b4dce4dfe8918 -> http://book-service:3000/api/books/69202da8473b4dce4dfe8918
2025-11-22 06:44:05 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:44:16 [info]: GET /v1/books/category
2025-11-22 06:44:16 [debug]: Proxying: /v1/books/category?category=fig -> http://book-service:3000/api/books/category?category=fig
2025-11-22 06:44:16 [debug]: Response from http://book-service:3000: 404
2025-11-22 06:44:20 [info]: GET /v1/books/category
2025-11-22 06:44:20 [debug]: Proxying: /v1/books/category?category=e -> http://book-service:3000/api/books/category?category=e
2025-11-22 06:44:20 [debug]: Response from http://book-service:3000: 200
2025-11-22 06:44:46 [info]: GET /v1/cart
2025-11-22 06:44:46 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"5adfa6ff-7add-4adc-af2f-ad44d0f2bf0a","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:44:46 [debug]: Auth middleware - Path: /, OriginalUrl: /v1/cart
2025-11-22 06:44:46 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:44:46 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:44:46 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:44:46 [debug]: Proxying: /v1/cart -> http://cart-service:3001/api/cart
2025-11-22 06:44:46 [debug]: Response from http://cart-service:3001: 200
2025-11-22 06:45:02 [info]: POST /v1/cart/add
2025-11-22 06:45:02 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjAzMGQ0MTg2ODViNDk3MTA0YWUzMyIsImVtYWlsIjoibm95Y2hhbGluaDI0QGtpdC5lZHUua2giLCJpYXQiOjE3NjM3MTgwMDQsImV4cCI6MTc2MzcyMTYwNH0.oWtdWeRCVhX2lALuFv_e3hzygWrlG0FFQA0l2QHrLP8","content-type":"application/json","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"f60ff7b0-0540-4c54-9cb1-fafd5f1d8f92","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"46","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:45:02 [debug]: Auth middleware - Path: /add, OriginalUrl: /v1/cart/add
2025-11-22 06:45:02 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjAzMGQ0MTg2ODViNDk3MTA0YWUzMyIsImVtYWlsIjoibm95Y2hhbGluaDI0QGtpdC5lZHUua2giLCJpYXQiOjE3NjM3MTgwMDQsImV4cCI6MTc2MzcyMTYwNH0.oWtdWeRCVhX2lALuFv_e3hzygWrlG0FFQA0l2QHrLP8
2025-11-22 06:45:02 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:45:02 [warn]: Token expired for POST /add
2025-11-22 06:45:09 [info]: POST /v1/cart/add
2025-11-22 06:45:09 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","content-type":"application/json","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"8c7c61d9-6731-4222-97f1-4429d0f859c9","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"46","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:45:09 [debug]: Auth middleware - Path: /add, OriginalUrl: /v1/cart/add
2025-11-22 06:45:09 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:45:09 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:45:09 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:45:09 [debug]: Proxying: /v1/cart/add -> http://cart-service:3001/api/cart/add
2025-11-22 06:45:09 [debug]: Response from http://cart-service:3001: 200
2025-11-22 06:46:08 [info]: POST /v1/cart/remove
2025-11-22 06:46:08 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjAzMGQ0MTg2ODViNDk3MTA0YWUzMyIsImVtYWlsIjoibm95Y2hhbGluaDI0QGtpdC5lZHUua2giLCJpYXQiOjE3NjM3MTgwMDQsImV4cCI6MTc2MzcyMTYwNH0.oWtdWeRCVhX2lALuFv_e3hzygWrlG0FFQA0l2QHrLP8","content-type":"application/json","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"5f2ee4e9-77b7-41cd-846b-42ce8cfccb4b","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"46","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:46:08 [debug]: Auth middleware - Path: /remove, OriginalUrl: /v1/cart/remove
2025-11-22 06:46:08 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjAzMGQ0MTg2ODViNDk3MTA0YWUzMyIsImVtYWlsIjoibm95Y2hhbGluaDI0QGtpdC5lZHUua2giLCJpYXQiOjE3NjM3MTgwMDQsImV4cCI6MTc2MzcyMTYwNH0.oWtdWeRCVhX2lALuFv_e3hzygWrlG0FFQA0l2QHrLP8
2025-11-22 06:46:08 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:46:08 [warn]: Token expired for POST /remove
2025-11-22 06:46:12 [info]: POST /v1/cart/remove
2025-11-22 06:46:12 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","content-type":"application/json","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"7bafd0a6-329f-4dd2-bcae-c89907221d0a","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"46","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:46:12 [debug]: Auth middleware - Path: /remove, OriginalUrl: /v1/cart/remove
2025-11-22 06:46:12 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:46:12 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:46:12 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:46:12 [debug]: Proxying: /v1/cart/remove -> http://cart-service:3001/api/cart/remove
2025-11-22 06:46:12 [debug]: Response from http://cart-service:3001: 500
2025-11-22 06:46:42 [info]: POST /v1/cart/add
2025-11-22 06:46:42 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","content-type":"application/json","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"7301b586-baa9-49fb-bb94-987744e18e70","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"46","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:46:42 [debug]: Auth middleware - Path: /add, OriginalUrl: /v1/cart/add
2025-11-22 06:46:42 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:46:42 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:46:42 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:46:42 [debug]: Proxying: /v1/cart/add -> http://cart-service:3001/api/cart/add
2025-11-22 06:46:43 [debug]: Response from http://cart-service:3001: 200
2025-11-22 06:46:44 [info]: POST /v1/cart/add
2025-11-22 06:46:44 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","content-type":"application/json","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"3d8c9c7f-dcda-4f24-9f49-76f6180ecc96","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"46","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:46:44 [debug]: Auth middleware - Path: /add, OriginalUrl: /v1/cart/add
2025-11-22 06:46:44 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:46:44 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:46:44 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:46:44 [debug]: Proxying: /v1/cart/add -> http://cart-service:3001/api/cart/add
2025-11-22 06:46:44 [debug]: Response from http://cart-service:3001: 200
2025-11-22 06:46:49 [info]: POST /v1/cart/remove
2025-11-22 06:46:49 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","content-type":"application/json","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"9d81395a-4f98-4c87-b06b-0fb37e0c9a1e","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"46","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:46:49 [debug]: Auth middleware - Path: /remove, OriginalUrl: /v1/cart/remove
2025-11-22 06:46:49 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:46:49 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:46:49 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:46:49 [debug]: Proxying: /v1/cart/remove -> http://cart-service:3001/api/cart/remove
2025-11-22 06:46:49 [debug]: Response from http://cart-service:3001: 200
2025-11-22 06:46:51 [info]: POST /v1/cart/remove
2025-11-22 06:46:51 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","content-type":"application/json","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"ed840159-2424-47c0-83b1-356fd8ec11c1","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"46","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:46:51 [debug]: Auth middleware - Path: /remove, OriginalUrl: /v1/cart/remove
2025-11-22 06:46:51 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:46:51 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:46:51 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:46:51 [debug]: Proxying: /v1/cart/remove -> http://cart-service:3001/api/cart/remove
2025-11-22 06:46:51 [debug]: Response from http://cart-service:3001: 200
2025-11-22 06:46:53 [info]: POST /v1/cart/remove
2025-11-22 06:46:53 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","content-type":"application/json","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"5523a020-7d86-49ca-a865-46e5f3bf660e","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"46","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:46:53 [debug]: Auth middleware - Path: /remove, OriginalUrl: /v1/cart/remove
2025-11-22 06:46:53 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:46:53 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:46:53 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:46:53 [debug]: Proxying: /v1/cart/remove -> http://cart-service:3001/api/cart/remove
2025-11-22 06:46:53 [debug]: Response from http://cart-service:3001: 500
2025-11-22 06:47:36 [info]: DELETE /api/cart/item/692033e2ebe47b05964f40fb
2025-11-22 06:47:36 [warn]: 404 Not Found: DELETE /api/cart/item/692033e2ebe47b05964f40fb
2025-11-22 06:47:42 [info]: DELETE /v1/cart/item/692033e2ebe47b05964f40fb
2025-11-22 06:47:42 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjAzMGQ0MTg2ODViNDk3MTA0YWUzMyIsImVtYWlsIjoibm95Y2hhbGluaDI0QGtpdC5lZHUua2giLCJpYXQiOjE3NjM3MTgwMDQsImV4cCI6MTc2MzcyMTYwNH0.oWtdWeRCVhX2lALuFv_e3hzygWrlG0FFQA0l2QHrLP8","content-type":"application/json","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"5d031a49-4328-4c36-8198-0800d8637cc0","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"46","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:47:42 [debug]: Auth middleware - Path: /item/692033e2ebe47b05964f40fb, OriginalUrl: /v1/cart/item/692033e2ebe47b05964f40fb
2025-11-22 06:47:42 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjAzMGQ0MTg2ODViNDk3MTA0YWUzMyIsImVtYWlsIjoibm95Y2hhbGluaDI0QGtpdC5lZHUua2giLCJpYXQiOjE3NjM3MTgwMDQsImV4cCI6MTc2MzcyMTYwNH0.oWtdWeRCVhX2lALuFv_e3hzygWrlG0FFQA0l2QHrLP8
2025-11-22 06:47:42 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:47:42 [warn]: Token expired for DELETE /item/692033e2ebe47b05964f40fb
2025-11-22 06:47:50 [info]: DELETE /v1/cart/item/692033e2ebe47b05964f40fb
2025-11-22 06:47:50 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","content-type":"application/json","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"88a71587-ef17-49aa-850d-dfc0ec710805","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"46","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:47:50 [debug]: Auth middleware - Path: /item/692033e2ebe47b05964f40fb, OriginalUrl: /v1/cart/item/692033e2ebe47b05964f40fb
2025-11-22 06:47:50 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:47:50 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:47:50 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:47:50 [debug]: Proxying: /v1/cart/item/692033e2ebe47b05964f40fb -> http://cart-service:3001/api/cart/item/692033e2ebe47b05964f40fb
2025-11-22 06:47:50 [debug]: Response from http://cart-service:3001: 404
2025-11-22 06:48:00 [info]: POST /v1/cart/add
2025-11-22 06:48:00 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","content-type":"application/json","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"57557c6b-a3f9-4432-b44d-2c542277c6b3","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"46","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:48:00 [debug]: Auth middleware - Path: /add, OriginalUrl: /v1/cart/add
2025-11-22 06:48:00 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:48:00 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:48:00 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:48:00 [debug]: Proxying: /v1/cart/add -> http://cart-service:3001/api/cart/add
2025-11-22 06:48:01 [debug]: Response from http://cart-service:3001: 200
2025-11-22 06:48:04 [info]: POST /v1/cart/remove
2025-11-22 06:48:04 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","content-type":"application/json","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"1672ae79-4938-4c29-81a8-dfc32d25c620","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"46","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:48:04 [debug]: Auth middleware - Path: /remove, OriginalUrl: /v1/cart/remove
2025-11-22 06:48:04 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:48:04 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:48:04 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:48:04 [debug]: Proxying: /v1/cart/remove -> http://cart-service:3001/api/cart/remove
2025-11-22 06:48:05 [debug]: Response from http://cart-service:3001: 200
2025-11-22 06:48:17 [info]: DELETE /v1/cart/item/69215bf59f024ee37f2dd753
2025-11-22 06:48:17 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","content-type":"application/json","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"a198afac-b4b6-49af-b160-1ef50424cddf","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"46","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:48:17 [debug]: Auth middleware - Path: /item/69215bf59f024ee37f2dd753, OriginalUrl: /v1/cart/item/69215bf59f024ee37f2dd753
2025-11-22 06:48:17 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:48:17 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:48:17 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:48:17 [debug]: Proxying: /v1/cart/item/69215bf59f024ee37f2dd753 -> http://cart-service:3001/api/cart/item/69215bf59f024ee37f2dd753
2025-11-22 06:48:17 [debug]: Response from http://cart-service:3001: 200
2025-11-22 06:48:46 [info]: DELETE /v1/cart/clear
2025-11-22 06:48:46 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MWRmNzlkMDBmZTFjNjQwMGFlZjUwMiIsImVtYWlsIjoibm95LmNoYWxpbmgyNEBraXQuZWR1LmtoIiwiaWF0IjoxNzYzNzA4NDM1LCJleHAiOjE3NjM3MTIwMzV9.mBFLJDDdIMSKGd-0Zza185QpRGRzzAYTCF-3C_Qru5Y","content-type":"application/json","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"f1d4ba5d-e31a-4e39-bd59-bc210feedcdc","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"46","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:48:46 [debug]: Auth middleware - Path: /clear, OriginalUrl: /v1/cart/clear
2025-11-22 06:48:46 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MWRmNzlkMDBmZTFjNjQwMGFlZjUwMiIsImVtYWlsIjoibm95LmNoYWxpbmgyNEBraXQuZWR1LmtoIiwiaWF0IjoxNzYzNzA4NDM1LCJleHAiOjE3NjM3MTIwMzV9.mBFLJDDdIMSKGd-0Zza185QpRGRzzAYTCF-3C_Qru5Y
2025-11-22 06:48:46 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:48:46 [warn]: Token expired for DELETE /clear
2025-11-22 06:49:02 [info]: DELETE /v1/cart/clear
2025-11-22 06:49:02 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","content-type":"application/json","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"e1d7aa35-cd2c-4c16-9650-e7dd7442b981","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"46","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:49:02 [debug]: Auth middleware - Path: /clear, OriginalUrl: /v1/cart/clear
2025-11-22 06:49:02 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:49:02 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:49:02 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:49:02 [debug]: Proxying: /v1/cart/clear -> http://cart-service:3001/api/cart/clear
2025-11-22 06:49:02 [debug]: Response from http://cart-service:3001: 403
2025-11-22 06:49:29 [info]: POST /v1/orders
2025-11-22 06:49:29 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","content-type":"application/json","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"4decad28-8e4c-4474-b6de-35c329f04b0d","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"203","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:49:29 [debug]: Auth middleware - Path: /, OriginalUrl: /v1/orders
2025-11-22 06:49:29 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:49:29 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:49:29 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:49:29 [debug]: Proxying: /v1/orders -> http://order-service:3002/api/orders
2025-11-22 06:49:29 [debug]: Response from http://order-service:3002: 400
2025-11-22 06:50:00 [info]: GET /v1/orders
2025-11-22 06:50:00 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjAzMGQ0MTg2ODViNDk3MTA0YWUzMyIsImVtYWlsIjoibm95Y2hhbGluaDI0QGtpdC5lZHUua2giLCJpYXQiOjE3NjM3MjIzODYsImV4cCI6MTc2MzcyNTk4Nn0.JCLPVATw1fSZjRMo9uAyySmQcWeZhQYRtzBt3VBK_gE","content-type":"text/plain","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"8f904c2c-7f5d-4106-ac29-2057245d0d35","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"196","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:50:00 [debug]: Auth middleware - Path: /, OriginalUrl: /v1/orders
2025-11-22 06:50:00 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjAzMGQ0MTg2ODViNDk3MTA0YWUzMyIsImVtYWlsIjoibm95Y2hhbGluaDI0QGtpdC5lZHUua2giLCJpYXQiOjE3NjM3MjIzODYsImV4cCI6MTc2MzcyNTk4Nn0.JCLPVATw1fSZjRMo9uAyySmQcWeZhQYRtzBt3VBK_gE
2025-11-22 06:50:00 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:50:00 [warn]: Token expired for GET /
2025-11-22 06:50:04 [info]: GET /v1/orders
2025-11-22 06:50:04 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","content-type":"text/plain","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"3ff143a7-1aa4-49ee-b20f-1a4b1e3d3124","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"196","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:50:04 [debug]: Auth middleware - Path: /, OriginalUrl: /v1/orders
2025-11-22 06:50:04 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:50:04 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:50:04 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:50:04 [debug]: Proxying: /v1/orders -> http://order-service:3002/api/orders
2025-11-22 06:50:04 [debug]: Response from http://order-service:3002: 200
2025-11-22 06:50:25 [info]: GET /v1/orders
2025-11-22 06:50:25 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","content-type":"text/plain","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"28f98d5d-dae3-406f-b599-978ce405f31d","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","content-length":"196","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:50:25 [debug]: Auth middleware - Path: /, OriginalUrl: /v1/orders
2025-11-22 06:50:25 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:50:25 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:50:25 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:50:25 [debug]: Proxying: /v1/orders -> http://order-service:3002/api/orders
2025-11-22 06:50:25 [debug]: Response from http://order-service:3002: 200
2025-11-22 06:50:37 [info]: GET /v1/orders
2025-11-22 06:50:37 [debug]: Auth middleware - Headers: {"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw","user-agent":"PostmanRuntime/7.49.1","accept":"*/*","postman-token":"01345383-005e-49d6-a28b-7e91d59dde9a","host":"localhost:3000","accept-encoding":"gzip, deflate, br","connection":"keep-alive","cookie":"Cookie_1=value; better-auth.session_token=4Dqax8vsAVKBso9YbjuU2zuoVHgoOVVs.Mp5jWEGT%2FXHurqjfXhyILhlQHNyZdGC9tZU3yKXNlPc%3D"}
2025-11-22 06:50:37 [debug]: Auth middleware - Path: /, OriginalUrl: /v1/orders
2025-11-22 06:50:37 [debug]: Auth middleware - Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjE1MDJhYzllYmFhNmFjNzI0ZGYwNiIsImVtYWlsIjoidGVzdEB0ZXQuY29tIiwiaWF0IjoxNzYzNzkzNTIwLCJleHAiOjE3NjM3OTcxMjB9.X7f36gFfwKdFx3sr1Mdu17Va9rMlEQJeryjSlmzZGrw
2025-11-22 06:50:37 [debug]: Auth middleware - Token extracted from header: eyJhbGciOiJIUzI1NiIs...
2025-11-22 06:50:37 [debug]: User authenticated: test@tet.com (6921502ac9ebaa6ac724df06)
2025-11-22 06:50:37 [debug]: Proxying: /v1/orders -> http://order-service:3002/api/orders
2025-11-22 06:50:37 [debug]: Response from http://order-service:3002: 200
2025-11-22 06:51:29 [info]: POST /v1/auth/login
2025-11-22 06:51:29 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:51:29 [debug]: Response from http://auth-service:5000: 400
2025-11-22 06:51:53 [info]: POST /v1/auth/login
2025-11-22 06:51:53 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:51:53 [debug]: Response from http://auth-service:5000: 400
2025-11-22 06:52:03 [info]: POST /v1/auth/login
2025-11-22 06:52:03 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:52:03 [debug]: Response from http://auth-service:5000: 400
2025-11-22 06:52:20 [info]: POST /v1/auth/login
2025-11-22 06:52:20 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-22 06:52:20 [debug]: Response from http://auth-service:5000: 400
2025-11-22 06:54:15 [info]: SIGTERM received, starting graceful shutdown...
2025-11-22 06:54:15 [info]: HTTP server closed
2025-11-22 06:54:15 [info]: Redis connection closed
2025-11-22 06:54:15 [info]: SIGINT received, starting graceful shutdown...
2025-11-22 06:54:15 [info]: HTTP server closed
2025-11-22 06:54:15 [error]: Error closing Redis connection: Connection is closed.
2025-11-22 06:54:15 [info]: SIGINT received, starting graceful shutdown...
2025-11-22 06:54:15 [info]: HTTP server closed
2025-11-22 06:54:15 [error]: Error closing Redis connection: Connection is closed.
2025-11-22 06:54:16 [info]: Shutdown complete, exiting process
2025-11-25 16:06:44 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-25 16:06:44 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-25 16:06:44 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-25 16:06:44 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-25 16:06:44 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-25 16:06:44 [info]: ðŸš€ API Gateway started successfully
2025-11-25 16:06:44 [info]: ðŸ“ Environment: development
2025-11-25 16:06:44 [info]: ðŸŒ Port: 3000
2025-11-25 16:06:44 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-25 16:06:44 [info]: ðŸ“Š Redis: Enabled
2025-11-25 16:06:44 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-25 16:06:44 [info]: âœ… Ready to handle requests
2025-11-25 16:06:45 [error]: Redis connection error: getaddrinfo ENOTFOUND redis
2025-11-25 16:06:45 [warn]: Redis connection retry attempt 1, delay: 50ms
2025-11-25 16:06:49 [error]: Redis connection error: getaddrinfo ENOTFOUND redis
2025-11-25 16:06:49 [warn]: Redis connection retry attempt 2, delay: 100ms
2025-11-25 16:06:53 [error]: Redis connection error: getaddrinfo ENOTFOUND redis
2025-11-25 16:06:53 [warn]: Redis connection retry attempt 3, delay: 150ms
2025-11-25 16:06:57 [error]: Redis connection error: getaddrinfo ENOTFOUND redis
2025-11-25 16:06:57 [warn]: Redis connection retry attempt 4, delay: 200ms
2025-11-25 16:06:57 [error]: MaxRetriesPerRequestError: Reached the max retries per request limit (which is 3). Refer to "maxRetriesPerRequest" option for details.
    at Socket.<anonymous> (/home/sengz/Documents/BookVerse/backend/api-gateway/node_modules/ioredis/built/redis/event_handler.js:207:37)
    at Object.onceWrapper (node:events:634:26)
    at Socket.emit (node:events:519:28)
    at TCP.<anonymous> (node:net:346:12)
2025-11-25 16:06:57 [error]: Unhandled Rejection at: [object Promise], reason: MaxRetriesPerRequestError: Reached the max retries per request limit (which is 3). Refer to "maxRetriesPerRequest" option for details.
2025-11-25 16:06:57 [info]: UNHANDLED_REJECTION received, starting graceful shutdown...
2025-11-25 16:06:57 [error]: MaxRetriesPerRequestError: Reached the max retries per request limit (which is 3). Refer to "maxRetriesPerRequest" option for details.
    at Socket.<anonymous> (/home/sengz/Documents/BookVerse/backend/api-gateway/node_modules/ioredis/built/redis/event_handler.js:207:37)
    at Object.onceWrapper (node:events:634:26)
    at Socket.emit (node:events:519:28)
    at TCP.<anonymous> (node:net:346:12)
2025-11-25 16:06:57 [error]: Unhandled Rejection at: [object Promise], reason: MaxRetriesPerRequestError: Reached the max retries per request limit (which is 3). Refer to "maxRetriesPerRequest" option for details.
2025-11-25 16:06:57 [info]: UNHANDLED_REJECTION received, starting graceful shutdown...
2025-11-25 16:06:57 [info]: HTTP server closed
2025-11-25 16:06:57 [info]: HTTP server closed
2025-11-25 16:06:57 [info]: Redis connection closed
2025-11-25 16:06:57 [info]: Redis connection closed
2025-11-25 16:08:20 [info]: Redis disabled, using in-memory rate limiting
2025-11-25 16:08:20 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-25 16:08:20 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-25 16:08:20 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-25 16:08:20 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-25 16:08:20 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-25 16:08:20 [info]: ðŸš€ API Gateway started successfully
2025-11-25 16:08:20 [info]: ðŸ“ Environment: development
2025-11-25 16:08:20 [info]: ðŸŒ Port: 3000
2025-11-25 16:08:20 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-25 16:08:20 [info]: ðŸ“Š Redis: Disabled
2025-11-25 16:08:20 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-25 16:08:20 [info]: âœ… Ready to handle requests
2025-11-25 16:23:08 [info]: Redis disabled, using in-memory rate limiting
2025-11-25 16:23:08 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-25 16:23:08 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-25 16:23:08 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-25 16:23:08 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-25 16:23:08 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-25 16:23:08 [info]: ðŸš€ API Gateway started successfully
2025-11-25 16:23:08 [info]: ðŸ“ Environment: development
2025-11-25 16:23:08 [info]: ðŸŒ Port: 3000
2025-11-25 16:23:08 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-25 16:23:08 [info]: ðŸ“Š Redis: Disabled
2025-11-25 16:23:08 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-25 16:23:08 [info]: âœ… Ready to handle requests
2025-11-29 01:58:56 [info]: Redis disabled, using in-memory rate limiting
2025-11-29 01:58:56 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-29 01:58:56 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-29 01:58:56 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-29 01:58:56 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-29 01:58:56 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-29 01:58:56 [info]: ðŸš€ API Gateway started successfully
2025-11-29 01:58:56 [info]: ðŸ“ Environment: development
2025-11-29 01:58:56 [info]: ðŸŒ Port: 3000
2025-11-29 01:58:56 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-29 01:58:56 [info]: ðŸ“Š Redis: Disabled
2025-11-29 01:58:56 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-29 01:58:56 [info]: âœ… Ready to handle requests
2025-11-29 01:59:24 [info]: Redis disabled, using in-memory rate limiting
2025-11-29 01:59:24 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-29 01:59:24 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-29 01:59:24 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-29 01:59:24 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-29 01:59:24 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-29 01:59:24 [info]: ðŸš€ API Gateway started successfully
2025-11-29 01:59:24 [info]: ðŸ“ Environment: development
2025-11-29 01:59:24 [info]: ðŸŒ Port: 3000
2025-11-29 01:59:24 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-29 01:59:24 [info]: ðŸ“Š Redis: Disabled
2025-11-29 01:59:24 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-29 01:59:24 [info]: âœ… Ready to handle requests
2025-11-29 02:01:16 [info]: Redis disabled, using in-memory rate limiting
2025-11-29 02:01:16 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-29 02:01:16 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-29 02:01:16 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-29 02:01:16 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-29 02:01:16 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-29 02:01:16 [info]: ðŸš€ API Gateway started successfully
2025-11-29 02:01:16 [info]: ðŸ“ Environment: development
2025-11-29 02:01:16 [info]: ðŸŒ Port: 3000
2025-11-29 02:01:16 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-29 02:01:16 [info]: ðŸ“Š Redis: Disabled
2025-11-29 02:01:16 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-29 02:01:16 [info]: âœ… Ready to handle requests
2025-11-29 02:01:40 [info]: GET /v1/books
2025-11-29 02:01:49 [info]: DELETE /v1/books/1
2025-11-29 02:02:11 [info]: DELETE /v1/books/2
2025-11-29 02:02:27 [info]: GET /v1/books
2025-11-29 02:02:46 [info]: DELETE /v1/books/692573bc154d8e8a803b494f
2025-11-29 02:04:19 [info]: GET /v1/books
2025-11-29 02:05:05 [info]: POST /v1/books
2025-11-29 02:05:36 [info]: GET /v1/books
2025-11-29 02:05:58 [info]: GET /v1/books
2025-11-29 02:06:24 [info]: GET /v1/books
2025-11-29 02:06:59 [info]: GET /v1/books
2025-11-29 02:07:07 [info]: DELETE /v1/books/692573bc154d8e8a803b4950
2025-11-29 02:07:47 [info]: POST /v1/books
2025-11-29 02:07:54 [info]: POST /v1/books
2025-11-29 02:09:57 [info]: POST /v1/books
2025-11-29 02:10:28 [info]: POST /v1/books
2025-11-29 02:10:36 [info]: DELETE /v1/books/6929f3a4d0bc1ebc58877328
2025-11-29 02:11:21 [info]: GET /v1/books
2025-11-29 02:11:36 [info]: GET /v1/books
2025-11-29 02:11:52 [info]: GET /v1/books
2025-11-29 02:12:02 [info]: GET /v1/books
2025-11-29 02:12:06 [info]: DELETE /v1/books/692573bc154d8e8a803b4951
2025-11-29 02:12:09 [info]: GET /v1/books
2025-11-29 02:12:15 [info]: GET /v1/books
2025-11-29 02:12:42 [info]: POST /v1/books
2025-11-29 02:12:47 [info]: GET /v1/books
2025-11-29 02:14:14 [info]: GET /v1/books
2025-11-29 02:14:27 [info]: GET /v1/books
2025-11-29 02:15:00 [info]: GET /v1/books
2025-11-29 02:15:18 [info]: GET /v1/books
2025-11-29 02:15:35 [info]: POST /v1/books
2025-11-29 02:15:42 [info]: GET /v1/books/6929f4d7d0bc1ebc58877339
2025-11-29 02:15:54 [info]: GET /v1/books
2025-11-29 02:17:07 [info]: GET /v1/books
2025-11-29 02:17:17 [info]: GET /v1/books
2025-11-29 02:17:32 [info]: GET /v1/books
2025-11-29 02:17:36 [info]: DELETE /v1/books/692573bc154d8e8a803b4952
2025-11-29 10:00:54 [info]: Redis disabled, using in-memory rate limiting
2025-11-29 10:00:54 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-29 10:00:54 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-29 10:00:54 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-29 10:00:54 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-29 10:00:54 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-29 10:00:54 [info]: ðŸš€ API Gateway started successfully
2025-11-29 10:00:54 [info]: ðŸ“ Environment: development
2025-11-29 10:00:54 [info]: ðŸŒ Port: 3000
2025-11-29 10:00:54 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-29 10:00:54 [info]: ðŸ“Š Redis: Disabled
2025-11-29 10:00:54 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-29 10:00:54 [info]: âœ… Ready to handle requests
2025-11-29 10:02:06 [info]: GET /v1/books
2025-11-29 10:02:16 [info]: GET /v1/books
2025-11-29 10:02:21 [info]: GET /v1/books
2025-11-29 10:02:32 [info]: GET /v1/books
2025-11-29 10:03:06 [info]: POST /v1/books
2025-11-29 10:03:12 [info]: GET /v1/books
2025-11-29 10:05:22 [info]: GET /v1/auth/refresh
2025-11-29 10:05:22 [info]: GET /v1/books
2025-11-29 10:05:40 [info]: GET /v1/books
2025-11-29 10:05:48 [info]: GET /v1/books
2025-11-29 10:06:27 [info]: Redis disabled, using in-memory rate limiting
2025-11-29 10:06:27 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-29 10:06:27 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-29 10:06:27 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-29 10:06:27 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-29 10:06:27 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-29 10:06:27 [info]: ðŸš€ API Gateway started successfully
2025-11-29 10:06:27 [info]: ðŸ“ Environment: development
2025-11-29 10:06:27 [info]: ðŸŒ Port: 3000
2025-11-29 10:06:27 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-29 10:06:27 [info]: ðŸ“Š Redis: Disabled
2025-11-29 10:06:27 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-29 10:06:27 [info]: âœ… Ready to handle requests
2025-11-29 10:06:44 [info]: GET /v1/auth/refresh
2025-11-29 10:06:44 [info]: GET /v1/books
2025-11-29 10:07:56 [info]: POST /v1/auth/login
2025-11-29 10:07:56 [info]: GET /v1/cart/cart
2025-11-29 10:07:56 [warn]: Authentication failed: No token provided for GET /cart
2025-11-29 10:07:59 [info]: GET /v1/books
2025-11-29 10:08:04 [info]: GET /v1/books
2025-11-29 10:08:30 [info]: GET /v1/books
2025-11-29 10:13:30 [info]: GET /v1/auth/refresh
2025-11-29 10:13:30 [info]: GET /v1/books
2025-11-29 10:13:48 [info]: POST /v1/auth/login
2025-11-29 10:13:48 [info]: GET /v1/cart/cart
2025-11-29 10:13:48 [warn]: Authentication failed: No token provided for GET /cart
2025-11-29 10:14:06 [info]: GET /v1/auth/refresh
2025-11-29 10:14:06 [info]: GET /v1/books
2025-11-29 10:14:22 [info]: POST /v1/auth/register
2025-11-29 10:14:22 [info]: GET /v1/cart/cart
2025-11-29 10:14:22 [warn]: Authentication failed: No token provided for GET /cart
2025-11-29 10:16:26 [info]: Redis disabled, using in-memory rate limiting
2025-11-29 10:16:26 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-29 10:16:26 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-29 10:16:26 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-29 10:16:26 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-29 10:16:26 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-29 10:16:26 [info]: ðŸš€ API Gateway started successfully
2025-11-29 10:16:26 [info]: ðŸ“ Environment: development
2025-11-29 10:16:26 [info]: ðŸŒ Port: 3000
2025-11-29 10:16:26 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-29 10:16:26 [info]: ðŸ“Š Redis: Disabled
2025-11-29 10:16:26 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-29 10:16:26 [info]: âœ… Ready to handle requests
2025-11-29 10:17:20 [info]: GET /v1/books
2025-11-29 10:18:41 [info]: POST /v1/cart/cart/add
2025-11-29 10:18:41 [warn]: Invalid token for POST /cart/add: jwt malformed
2025-11-29 10:20:32 [info]: GET /v1/auth/refresh
2025-11-29 10:20:32 [info]: GET /v1/books
2025-11-29 10:20:45 [info]: POST /v1/auth/login
2025-11-29 10:20:45 [info]: GET /v1/cart/cart
2025-11-29 10:20:45 [warn]: Authentication failed: No token provided for GET /cart
2025-11-29 10:23:08 [info]: Redis disabled, using in-memory rate limiting
2025-11-29 10:23:08 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-29 10:23:08 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-29 10:23:08 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-29 10:23:08 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-29 10:23:08 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-29 10:23:08 [info]: ðŸš€ API Gateway started successfully
2025-11-29 10:23:08 [info]: ðŸ“ Environment: development
2025-11-29 10:23:08 [info]: ðŸŒ Port: 3000
2025-11-29 10:23:08 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-29 10:23:08 [info]: ðŸ“Š Redis: Disabled
2025-11-29 10:23:08 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-29 10:23:08 [info]: âœ… Ready to handle requests
2025-11-29 10:23:34 [info]: GET /v1/auth/refresh
2025-11-29 10:23:38 [info]: GET /v1/auth/refresh
2025-11-29 10:23:38 [info]: GET /v1/books
2025-11-29 10:23:55 [info]: POST /v1/auth/login
2025-11-29 10:24:01 [info]: POST /v1/auth/login
2025-11-29 10:24:01 [info]: GET /v1/cart/cart
2025-11-29 10:24:01 [warn]: Invalid token for GET /cart: invalid signature
2025-11-29 13:48:49 [info]: GET /
2025-11-29 13:48:49 [warn]: 404 Not Found: GET /
2025-11-29 13:48:49 [info]: GET /favicon.ico
2025-11-29 13:48:49 [warn]: 404 Not Found: GET /favicon.ico
2025-11-29 14:14:16 [info]: SIGTERM received, starting graceful shutdown...
2025-11-29 14:14:16 [info]: HTTP server closed
2025-11-29 14:14:17 [info]: Shutdown complete, exiting process
2025-11-30 15:22:17 [info]: Redis disabled, using in-memory rate limiting
2025-11-30 15:22:17 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-30 15:22:17 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-30 15:22:17 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-30 15:22:17 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-30 15:22:17 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-30 15:22:17 [info]: ðŸš€ API Gateway started successfully
2025-11-30 15:22:17 [info]: ðŸ“ Environment: development
2025-11-30 15:22:17 [info]: ðŸŒ Port: 3000
2025-11-30 15:22:17 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-30 15:22:17 [info]: ðŸ“Š Redis: Disabled
2025-11-30 15:22:17 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-30 15:22:17 [info]: âœ… Ready to handle requests
2025-11-30 15:24:23 [info]: GET /v1/auth/refresh
2025-11-30 15:24:23 [info]: GET /v1/books
2025-11-30 15:25:04 [info]: POST /v1/auth/login
2025-11-30 15:25:04 [info]: GET /v1/cart/cart
2025-11-30 15:25:04 [warn]: Invalid token for GET /cart: invalid signature
2025-11-30 15:27:38 [info]: GET /v1/auth/refresh
2025-11-30 15:27:40 [info]: GET /v1/auth/refresh
2025-11-30 15:28:54 [info]: GET /v1/auth/refresh
2025-11-30 15:29:38 [info]: GET /v1/auth/refresh
2025-11-30 15:29:39 [info]: GET /v1/books
2025-11-30 15:30:25 [info]: GET /v1/books
2025-11-30 15:30:38 [info]: POST /v1/auth/login
2025-11-30 15:30:38 [info]: GET /v1/cart
2025-11-30 15:30:38 [warn]: Invalid token for GET /: invalid signature
2025-11-30 15:30:40 [info]: POST /v1/cart/add
2025-11-30 15:30:40 [warn]: Invalid token for POST /add: invalid signature
2025-11-30 15:30:44 [info]: GET /v1/auth/refresh
2025-11-30 15:30:46 [info]: GET /v1/books
2025-11-30 08:34:09 [info]: Redis disabled, using in-memory rate limiting
2025-11-30 08:34:09 [info]: Configuring route: /v1/auth -> http://auth-service:5000 (Auth: false)
2025-11-30 08:34:09 [info]: Configuring route: /v1/user -> http://auth-service:5000 (Auth: true)
2025-11-30 08:34:09 [info]: Configuring route: /v1/books -> http://book-service:3000 (Auth: false)
2025-11-30 08:34:09 [info]: Configuring route: /v1/cart -> http://cart-service:3001 (Auth: true)
2025-11-30 08:34:09 [info]: Configuring route: /v1/orders -> http://order-service:3002 (Auth: true)
2025-11-30 08:34:09 [info]: ðŸš€ API Gateway started successfully
2025-11-30 08:34:09 [info]: ðŸ“ Environment: development
2025-11-30 08:34:09 [info]: ðŸŒ Port: 3000
2025-11-30 08:34:09 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-30 08:34:09 [info]: ðŸ“Š Redis: Disabled
2025-11-30 08:34:09 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-30 08:34:09 [info]: âœ… Ready to handle requests
2025-11-30 08:34:52 [info]: SIGTERM received, starting graceful shutdown...
2025-11-30 08:34:52 [info]: HTTP server closed
2025-11-30 08:34:52 [info]: SIGINT received, starting graceful shutdown...
2025-11-30 08:34:52 [info]: HTTP server closed
2025-11-30 08:34:52 [info]: SIGINT received, starting graceful shutdown...
2025-11-30 08:34:52 [info]: HTTP server closed
2025-11-30 08:34:53 [info]: Shutdown complete, exiting process
2025-11-30 08:35:07 [info]: Redis disabled, using in-memory rate limiting
2025-11-30 08:35:07 [info]: Configuring route: /v1/auth -> http://auth-service:5000 (Auth: false)
2025-11-30 08:35:07 [info]: Configuring route: /v1/user -> http://auth-service:5000 (Auth: true)
2025-11-30 08:35:07 [info]: Configuring route: /v1/books -> http://book-service:3000 (Auth: false)
2025-11-30 08:35:07 [info]: Configuring route: /v1/cart -> http://cart-service:3001 (Auth: true)
2025-11-30 08:35:07 [info]: Configuring route: /v1/orders -> http://order-service:3002 (Auth: true)
2025-11-30 08:35:07 [info]: ðŸš€ API Gateway started successfully
2025-11-30 08:35:07 [info]: ðŸ“ Environment: development
2025-11-30 08:35:07 [info]: ðŸŒ Port: 3000
2025-11-30 08:35:07 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-30 08:35:07 [info]: ðŸ“Š Redis: Disabled
2025-11-30 08:35:07 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-30 08:35:07 [info]: âœ… Ready to handle requests
2025-11-30 08:35:49 [info]: GET /v1/auth/refresh
2025-11-30 08:35:49 [debug]: Optional auth: User authenticated: sengnoname168@gmail.com
2025-11-30 08:35:49 [debug]: Proxying: /v1/auth/refresh -> http://auth-service:5000/api/auth/refresh
2025-11-30 08:35:49 [debug]: Response from http://auth-service:5000: 404
2025-11-30 08:35:50 [info]: GET /v1/auth/refresh
2025-11-30 08:35:50 [debug]: Optional auth: User authenticated: sengnoname168@gmail.com
2025-11-30 08:35:50 [debug]: Proxying: /v1/auth/refresh -> http://auth-service:5000/api/auth/refresh
2025-11-30 08:35:50 [debug]: Response from http://auth-service:5000: 404
2025-11-30 08:35:50 [info]: GET /v1/auth/refresh
2025-11-30 08:35:50 [debug]: Optional auth: User authenticated: sengnoname168@gmail.com
2025-11-30 08:35:50 [debug]: Proxying: /v1/auth/refresh -> http://auth-service:5000/api/auth/refresh
2025-11-30 08:35:50 [debug]: Response from http://auth-service:5000: 404
2025-11-30 08:35:50 [info]: GET /v1/auth/refresh
2025-11-30 08:35:50 [debug]: Optional auth: User authenticated: sengnoname168@gmail.com
2025-11-30 08:35:50 [debug]: Proxying: /v1/auth/refresh -> http://auth-service:5000/api/auth/refresh
2025-11-30 08:35:50 [debug]: Response from http://auth-service:5000: 404
2025-11-30 08:35:51 [info]: GET /v1/books
2025-11-30 08:35:51 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-30 08:35:51 [error]: Proxy error to http://book-service:3000: connect ECONNREFUSED 172.18.0.2:3000
2025-11-30 08:35:51 [info]: GET /v1/auth/refresh
2025-11-30 08:35:51 [debug]: Optional auth: User authenticated: sengnoname168@gmail.com
2025-11-30 08:35:51 [debug]: Proxying: /v1/auth/refresh -> http://auth-service:5000/api/auth/refresh
2025-11-30 08:35:51 [debug]: Response from http://auth-service:5000: 404
2025-11-30 08:35:51 [info]: GET /v1/books
2025-11-30 08:35:51 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-30 08:35:51 [error]: Proxy error to http://book-service:3000: connect ECONNREFUSED 172.18.0.2:3000
2025-11-30 08:35:52 [info]: GET /v1/auth/refresh
2025-11-30 08:35:52 [debug]: Optional auth: User authenticated: sengnoname168@gmail.com
2025-11-30 08:35:52 [debug]: Proxying: /v1/auth/refresh -> http://auth-service:5000/api/auth/refresh
2025-11-30 08:35:52 [debug]: Response from http://auth-service:5000: 404
2025-11-30 08:35:52 [info]: GET /v1/books
2025-11-30 08:35:52 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-30 08:35:52 [error]: Proxy error to http://book-service:3000: connect ECONNREFUSED 172.18.0.2:3000
2025-11-30 08:35:52 [info]: GET /v1/auth/refresh
2025-11-30 08:35:52 [debug]: Optional auth: User authenticated: sengnoname168@gmail.com
2025-11-30 08:35:52 [debug]: Proxying: /v1/auth/refresh -> http://auth-service:5000/api/auth/refresh
2025-11-30 08:35:52 [debug]: Response from http://auth-service:5000: 404
2025-11-30 08:35:52 [info]: GET /v1/books
2025-11-30 08:35:52 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-30 08:35:52 [error]: Proxy error to http://book-service:3000: connect ECONNREFUSED 172.18.0.2:3000
2025-11-30 08:36:04 [info]: POST /v1/auth/login
2025-11-30 08:36:04 [debug]: Optional auth: User authenticated: sengnoname168@gmail.com
2025-11-30 08:36:04 [debug]: Proxying: /v1/auth/login -> http://auth-service:5000/api/auth/login
2025-11-30 08:36:04 [debug]: Response from http://auth-service:5000: 200
2025-11-30 08:36:04 [info]: GET /v1/cart
2025-11-30 08:36:04 [debug]: Auth middleware - Headers: {"host":"localhost:3000","user-agent":"Mozilla/5.0 (X11; Linux x86_64; rv:145.0) Gecko/20100101 Firefox/145.0","accept":"application/json, text/plain, */*","accept-language":"km,en-US;q=0.5","accept-encoding":"gzip, deflate, br, zstd","origin":"http://localhost:4200","connection":"keep-alive","referer":"http://localhost:4200/","cookie":"refreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjlmNzc2Mzg1ODhhZjA0NGRkMzY1NSIsImVtYWlsIjoic2VuZ25vbmFtZTE2OEBnbWFpbC5jb20iLCJpYXQiOjE3NjQ0OTE3NjQsImV4cCI6MTc2NTA5NjU2NH0.s4LqpozolDJFdzNDR2SAWvHRkzsH-PKuA7qttUBXw_M; token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MjlmNzc2Mzg1ODhhZjA0NGRkMzY1NSIsImVtYWlsIjoic2VuZ25vbmFtZTE2OEBnbWFpbC5jb20iLCJpYXQiOjE3NjQ0OTE3NjQsImV4cCI6MTc2NDQ5NTM2NH0.CwWjE9DXpIzwlmXZ8y7htr6q4vVjLD6cDdyVz_2g-iU","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-site"}
2025-11-30 08:36:04 [debug]: Auth middleware - Path: /, OriginalUrl: /v1/cart
2025-11-30 08:36:04 [debug]: Auth middleware - Authorization header: undefined
2025-11-30 08:36:04 [debug]: Auth middleware - Token extracted from cookie
2025-11-30 08:36:04 [debug]: User authenticated: sengnoname168@gmail.com (6929f77638588af044dd3655)
2025-11-30 08:36:04 [debug]: Proxying: /v1/cart -> http://cart-service:3001/api/cart
2025-11-30 08:36:04 [debug]: Response from http://cart-service:3001: 200
2025-11-30 08:36:08 [info]: GET /v1/auth/refresh
2025-11-30 08:36:08 [debug]: Optional auth: User authenticated: sengnoname168@gmail.com
2025-11-30 08:36:08 [debug]: Proxying: /v1/auth/refresh -> http://auth-service:5000/api/auth/refresh
2025-11-30 08:36:08 [debug]: Response from http://auth-service:5000: 404
2025-11-30 08:36:08 [info]: GET /v1/books
2025-11-30 08:36:08 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-30 08:36:08 [error]: Proxy error to http://book-service:3000: connect ECONNREFUSED 172.18.0.2:3000
2025-11-30 08:37:02 [info]: GET /v1/auth/refresh
2025-11-30 08:37:02 [debug]: Optional auth: User authenticated: sengnoname168@gmail.com
2025-11-30 08:37:02 [debug]: Proxying: /v1/auth/refresh -> http://auth-service:5000/api/auth/refresh
2025-11-30 08:37:02 [debug]: Response from http://auth-service:5000: 404
2025-11-30 08:37:02 [info]: GET /v1/books
2025-11-30 08:37:02 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-30 08:37:02 [error]: Proxy error to http://book-service:3000: connect ECONNREFUSED 172.18.0.2:3000
2025-11-30 08:37:04 [info]: GET /v1/auth/refresh
2025-11-30 08:37:04 [debug]: Optional auth: User authenticated: sengnoname168@gmail.com
2025-11-30 08:37:04 [debug]: Proxying: /v1/auth/refresh -> http://auth-service:5000/api/auth/refresh
2025-11-30 08:37:04 [debug]: Response from http://auth-service:5000: 404
2025-11-30 08:37:04 [info]: GET /v1/books
2025-11-30 08:37:04 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-30 08:37:04 [error]: Proxy error to http://book-service:3000: connect ECONNREFUSED 172.18.0.2:3000
2025-11-30 08:37:23 [info]: GET /v1/auth/refresh
2025-11-30 08:37:23 [debug]: Proxying: /v1/auth/refresh -> http://auth-service:5000/api/auth/refresh
2025-11-30 08:37:23 [debug]: Response from http://auth-service:5000: 404
2025-11-30 08:37:23 [info]: GET /v1/books
2025-11-30 08:37:23 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-30 08:37:23 [error]: Proxy error to http://book-service:3000: connect ECONNREFUSED 172.18.0.2:3000
2025-11-30 15:37:34 [info]: Redis disabled, using in-memory rate limiting
2025-11-30 15:37:34 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-30 15:37:34 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-30 15:37:34 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-30 15:37:34 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-30 15:37:34 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-30 15:37:34 [info]: ðŸš€ API Gateway started successfully
2025-11-30 15:37:34 [info]: ðŸ“ Environment: development
2025-11-30 15:37:34 [info]: ðŸŒ Port: 3000
2025-11-30 15:37:34 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-30 15:37:34 [info]: ðŸ“Š Redis: Disabled
2025-11-30 15:37:34 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-30 15:37:34 [info]: âœ… Ready to handle requests
2025-11-30 08:37:48 [info]: GET /v1/auth/refresh
2025-11-30 08:37:48 [debug]: Optional auth: User authenticated: sengnoname168@gmail.com
2025-11-30 08:37:48 [debug]: Proxying: /v1/auth/refresh -> http://auth-service:5000/api/auth/refresh
2025-11-30 08:37:48 [debug]: Response from http://auth-service:5000: 404
2025-11-30 08:37:48 [info]: GET /v1/books
2025-11-30 08:37:48 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-30 08:37:48 [error]: Proxy error to http://book-service:3000: connect ECONNREFUSED 172.18.0.2:3000
2025-11-30 08:37:49 [info]: GET /v1/auth/refresh
2025-11-30 08:37:49 [debug]: Optional auth: User authenticated: sengnoname168@gmail.com
2025-11-30 08:37:49 [debug]: Proxying: /v1/auth/refresh -> http://auth-service:5000/api/auth/refresh
2025-11-30 08:37:49 [debug]: Response from http://auth-service:5000: 404
2025-11-30 08:37:49 [info]: GET /v1/books
2025-11-30 08:37:49 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-30 08:37:49 [error]: Proxy error to http://book-service:3000: connect ECONNREFUSED 172.18.0.2:3000
2025-11-30 08:38:06 [info]: GET /v1/auth/refresh
2025-11-30 08:38:06 [debug]: Optional auth: User authenticated: sengnoname168@gmail.com
2025-11-30 08:38:06 [debug]: Proxying: /v1/auth/refresh -> http://auth-service:5000/api/auth/refresh
2025-11-30 08:38:06 [debug]: Response from http://auth-service:5000: 404
2025-11-30 08:38:06 [info]: GET /v1/books
2025-11-30 08:38:06 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-30 08:38:06 [error]: Proxy error to http://book-service:3000: connect ECONNREFUSED 172.18.0.2:3000
2025-11-30 08:38:07 [info]: GET /v1/auth/refresh
2025-11-30 08:38:07 [debug]: Optional auth: User authenticated: sengnoname168@gmail.com
2025-11-30 08:38:07 [debug]: Proxying: /v1/auth/refresh -> http://auth-service:5000/api/auth/refresh
2025-11-30 08:38:07 [debug]: Response from http://auth-service:5000: 404
2025-11-30 08:38:07 [info]: GET /v1/books
2025-11-30 08:38:07 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-30 08:38:07 [error]: Proxy error to http://book-service:3000: connect ECONNREFUSED 172.18.0.2:3000
2025-11-30 08:39:39 [info]: GET /health
2025-11-30 08:39:45 [info]: GET /v1/books
2025-11-30 08:39:45 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-30 08:39:45 [error]: Proxy error to http://book-service:3000: connect ECONNREFUSED 172.18.0.2:3000
2025-11-30 15:41:01 [info]: Redis disabled, using in-memory rate limiting
2025-11-30 15:41:01 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-30 15:41:01 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-30 15:41:01 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-30 15:41:01 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-30 15:41:01 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-30 15:41:01 [info]: ðŸš€ API Gateway started successfully
2025-11-30 15:41:01 [info]: ðŸ“ Environment: development
2025-11-30 15:41:01 [info]: ðŸŒ Port: 3000
2025-11-30 15:41:01 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-30 15:41:01 [info]: ðŸ“Š Redis: Disabled
2025-11-30 15:41:01 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-30 15:41:01 [info]: âœ… Ready to handle requests
2025-11-30 08:41:41 [info]: GET /v1/books
2025-11-30 08:41:41 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-30 08:41:41 [error]: Proxy error to http://book-service:3000: connect ECONNREFUSED 172.18.0.2:3000
2025-11-30 08:41:41 [info]: GET /v1/books
2025-11-30 08:41:41 [debug]: Proxying: /v1/books -> http://book-service:3000/api/books
2025-11-30 08:41:41 [error]: Proxy error to http://book-service:3000: connect ECONNREFUSED 172.18.0.2:3000
2025-11-30 08:41:56 [info]: SIGTERM received, starting graceful shutdown...
2025-11-30 08:41:56 [info]: HTTP server closed
2025-11-30 08:41:56 [info]: SIGINT received, starting graceful shutdown...
2025-11-30 08:41:56 [info]: HTTP server closed
2025-11-30 08:41:56 [info]: SIGINT received, starting graceful shutdown...
2025-11-30 08:41:56 [info]: HTTP server closed
2025-11-30 08:41:57 [info]: Shutdown complete, exiting process
2025-11-30 15:42:18 [info]: Redis disabled, using in-memory rate limiting
2025-11-30 15:42:18 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-30 15:42:18 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-30 15:42:18 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-30 15:42:18 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-30 15:42:18 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-30 15:42:18 [info]: ðŸš€ API Gateway started successfully
2025-11-30 15:42:18 [info]: ðŸ“ Environment: development
2025-11-30 15:42:18 [info]: ðŸŒ Port: 3000
2025-11-30 15:42:18 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-30 15:42:18 [info]: ðŸ“Š Redis: Disabled
2025-11-30 15:42:18 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-30 15:42:18 [info]: âœ… Ready to handle requests
2025-11-30 15:42:29 [info]: GET /v1/books
2025-11-30 15:42:41 [info]: GET /health
2025-11-30 15:43:23 [info]: GET /v1/auth/refresh
2025-11-30 15:43:23 [info]: GET /v1/books
2025-11-30 15:43:39 [info]: POST /v1/auth/login
2025-11-30 15:43:40 [info]: GET /v1/cart
2025-11-30 15:43:40 [warn]: Invalid token for GET /: invalid signature
2025-11-30 15:43:44 [info]: GET /v1/books
2025-11-30 15:43:45 [info]: POST /v1/cart/add
2025-11-30 15:43:45 [warn]: Invalid token for POST /add: invalid signature
2025-11-30 15:43:53 [info]: GET /v1/auth/refresh
2025-11-30 15:46:15 [info]: GET /v1/auth/refresh
2025-11-30 15:46:16 [info]: GET /v1/auth/refresh
2025-11-30 15:46:18 [info]: GET /v1/auth/refresh
2025-11-30 15:47:07 [info]: GET /v1/auth/refresh
2025-11-30 15:47:20 [info]: GET /v1/auth/refresh
2025-11-30 15:47:42 [info]: Redis disabled, using in-memory rate limiting
2025-11-30 15:47:42 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-30 15:47:42 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-30 15:47:42 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-30 15:47:42 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-30 15:47:42 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-30 15:47:42 [info]: ðŸš€ API Gateway started successfully
2025-11-30 15:47:42 [info]: ðŸ“ Environment: development
2025-11-30 15:47:42 [info]: ðŸŒ Port: 3000
2025-11-30 15:47:42 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-30 15:47:42 [info]: ðŸ“Š Redis: Disabled
2025-11-30 15:47:42 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-30 15:47:42 [info]: âœ… Ready to handle requests
2025-11-30 15:48:00 [info]: GET /v1/auth/refresh
2025-11-30 15:48:33 [info]: GET /v1/auth/refresh
2025-11-30 15:48:34 [info]: GET /v1/books
2025-11-30 15:48:44 [info]: POST /v1/auth/login
2025-11-30 15:48:44 [info]: GET /v1/cart
2025-11-30 15:48:44 [warn]: Invalid token for GET /: invalid signature
2025-11-30 15:48:47 [info]: GET /v1/auth/refresh
2025-11-30 15:48:47 [info]: GET /v1/books
2025-11-30 15:49:00 [info]: POST /v1/auth/login
2025-11-30 15:49:00 [info]: GET /v1/cart
2025-11-30 15:49:00 [warn]: Invalid token for GET /: invalid signature
2025-11-30 15:49:03 [info]: POST /v1/cart/add
2025-11-30 15:49:03 [warn]: Invalid token for POST /add: invalid signature
2025-11-30 15:49:07 [info]: GET /v1/books
2025-11-30 15:49:10 [info]: GET /v1/books
2025-11-30 15:50:59 [info]: GET /v1/auth/refresh
2025-11-30 15:51:16 [info]: POST /v1/auth/login
2025-11-30 15:51:41 [info]: GET /v1/auth/refresh
2025-11-30 15:51:41 [info]: GET /v1/books
2025-11-30 15:52:41 [info]: Redis disabled, using in-memory rate limiting
2025-11-30 15:52:41 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-30 15:52:41 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-30 15:52:41 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-30 15:52:41 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-30 15:52:41 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-30 15:52:41 [info]: ðŸš€ API Gateway started successfully
2025-11-30 15:52:41 [info]: ðŸ“ Environment: development
2025-11-30 15:52:41 [info]: ðŸŒ Port: 3000
2025-11-30 15:52:41 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-30 15:52:41 [info]: ðŸ“Š Redis: Disabled
2025-11-30 15:52:41 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-30 15:52:41 [info]: âœ… Ready to handle requests
2025-11-30 15:52:56 [info]: POST /v1/auth/login
2025-11-30 15:53:06 [info]: POST /v1/auth/register
2025-11-30 15:53:14 [info]: GET /v1/auth/refresh
2025-11-30 15:53:40 [info]: POST /v1/auth/login
2025-11-30 15:53:48 [info]: POST /v1/auth/login
2025-11-30 15:53:55 [info]: GET /v1/auth/refresh
2025-11-30 15:54:31 [info]: GET /v1/auth/refresh
2025-11-30 15:54:52 [info]: Redis disabled, using in-memory rate limiting
2025-11-30 15:54:52 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-30 15:54:52 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-30 15:54:52 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-30 15:54:52 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-30 15:54:52 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-30 15:54:52 [info]: ðŸš€ API Gateway started successfully
2025-11-30 15:54:52 [info]: ðŸ“ Environment: development
2025-11-30 15:54:52 [info]: ðŸŒ Port: 3000
2025-11-30 15:54:52 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-30 15:54:52 [info]: ðŸ“Š Redis: Disabled
2025-11-30 15:54:52 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-30 15:54:52 [info]: âœ… Ready to handle requests
2025-11-30 15:55:02 [info]: GET /v1/auth/refresh
2025-11-30 15:55:32 [info]: POST /v1/auth/login
2025-11-30 15:55:41 [info]: GET /v1/auth/refresh
2025-11-30 15:56:07 [info]: Redis disabled, using in-memory rate limiting
2025-11-30 15:56:07 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-30 15:56:07 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-30 15:56:07 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-30 15:56:07 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-30 15:56:07 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-30 15:56:07 [info]: ðŸš€ API Gateway started successfully
2025-11-30 15:56:07 [info]: ðŸ“ Environment: development
2025-11-30 15:56:07 [info]: ðŸŒ Port: 3000
2025-11-30 15:56:07 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-30 15:56:07 [info]: ðŸ“Š Redis: Disabled
2025-11-30 15:56:07 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-30 15:56:07 [info]: âœ… Ready to handle requests
2025-11-30 15:56:17 [info]: POST /v1/auth/login
2025-11-30 15:56:18 [info]: GET /v1/auth/refresh
2025-11-30 15:56:36 [info]: GET /v1/books
2025-11-30 15:56:39 [info]: POST /v1/auth/login
2025-11-30 15:56:39 [info]: GET /v1/cart
2025-11-30 15:56:39 [warn]: Invalid token for GET /: invalid signature
2025-11-30 15:56:41 [info]: GET /v1/auth/refresh
2025-11-30 15:56:41 [info]: GET /v1/books
2025-11-30 15:56:41 [info]: GET /v1/cart
2025-11-30 15:56:41 [warn]: Invalid token for GET /: invalid signature
2025-11-30 15:56:43 [info]: GET /v1/auth/refresh
2025-11-30 15:56:44 [info]: GET /v1/books
2025-11-30 15:56:44 [info]: GET /v1/cart
2025-11-30 15:56:44 [warn]: Invalid token for GET /: invalid signature
2025-11-30 15:56:45 [info]: POST /v1/cart/add
2025-11-30 15:56:45 [warn]: Invalid token for POST /add: invalid signature
2025-11-30 15:56:48 [info]: GET /v1/auth/refresh
2025-11-30 15:56:48 [info]: GET /v1/cart
2025-11-30 15:56:48 [warn]: Invalid token for GET /: invalid signature
2025-11-30 15:56:51 [info]: GET /v1/books
2025-11-30 15:56:51 [info]: GET /v1/auth/refresh
2025-11-30 15:56:51 [info]: GET /v1/books
2025-11-30 15:56:52 [info]: GET /v1/cart
2025-11-30 15:56:52 [warn]: Invalid token for GET /: invalid signature
2025-11-30 15:56:53 [info]: GET /v1/auth/refresh
2025-11-30 15:56:53 [info]: GET /v1/books
2025-11-30 15:56:54 [info]: GET /v1/cart
2025-11-30 15:56:54 [warn]: Invalid token for GET /: invalid signature
2025-11-30 15:56:59 [info]: POST /v1/cart/add
2025-11-30 15:56:59 [warn]: Invalid token for POST /add: invalid signature
2025-11-30 15:57:03 [info]: GET /v1/auth/refresh
2025-11-30 15:57:03 [info]: GET /v1/cart
2025-11-30 15:57:03 [warn]: Invalid token for GET /: invalid signature
2025-11-30 15:57:39 [info]: GET /v1/cart
2025-11-30 15:57:39 [warn]: Invalid token for GET /: invalid signature
2025-11-30 15:57:39 [info]: POST /v1/cart/add
2025-11-30 15:57:39 [warn]: Invalid token for POST /add: invalid signature
2025-11-30 15:58:30 [info]: GET /v1/cart
2025-11-30 15:58:30 [warn]: Invalid token for GET /: invalid signature
2025-11-30 15:58:48 [info]: Redis disabled, using in-memory rate limiting
2025-11-30 15:58:48 [info]: Configuring route: /v1/auth -> http://localhost:5000 (Auth: false)
2025-11-30 15:58:48 [info]: Configuring route: /v1/user -> http://localhost:5000 (Auth: true)
2025-11-30 15:58:48 [info]: Configuring route: /v1/books -> http://localhost:3004 (Auth: false)
2025-11-30 15:58:48 [info]: Configuring route: /v1/cart -> http://localhost:3001 (Auth: true)
2025-11-30 15:58:48 [info]: Configuring route: /v1/orders -> http://localhost:3002 (Auth: true)
2025-11-30 15:58:48 [info]: ðŸš€ API Gateway started successfully
2025-11-30 15:58:48 [info]: ðŸ“ Environment: development
2025-11-30 15:58:48 [info]: ðŸŒ Port: 3000
2025-11-30 15:58:48 [info]: ðŸ”’ CORS Origin: http://localhost:4200
2025-11-30 15:58:48 [info]: ðŸ“Š Redis: Disabled
2025-11-30 15:58:48 [info]: ðŸ›¡ï¸  Rate Limiting: Enabled
2025-11-30 15:58:48 [info]: âœ… Ready to handle requests
2025-11-30 15:58:53 [info]: POST /v1/auth/login
2025-11-30 15:58:53 [info]: GET /v1/cart
2025-11-30 15:59:13 [info]: POST /v1/cart/add
2025-11-30 15:59:13 [info]: GET /v1/cart
2025-11-30 16:00:16 [info]: GET /v1/auth/refresh
2025-11-30 16:00:16 [info]: GET /v1/cart
2025-11-30 16:00:18 [info]: GET /v1/books
2025-11-30 16:00:20 [info]: POST /v1/cart/add
2025-11-30 16:00:21 [info]: POST /v1/cart/add
2025-11-30 16:00:23 [info]: GET /v1/auth/refresh
2025-11-30 16:00:23 [info]: GET /v1/cart
2025-11-30 16:00:38 [info]: GET /v1/books
